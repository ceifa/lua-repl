(self.webpackChunktry_lua=self.webpackChunktry_lua||[]).push([[3726],{66542:function(e,t,r){var n="/index.js";!function(e){"use strict";var t;e.LuaReturn=void 0,(t=e.LuaReturn||(e.LuaReturn={}))[t.Ok=0]="Ok",t[t.Yield=1]="Yield",t[t.ErrorRun=2]="ErrorRun",t[t.ErrorSyntax=3]="ErrorSyntax",t[t.ErrorMem=4]="ErrorMem",t[t.ErrorErr=5]="ErrorErr",t[t.ErrorFile=6]="ErrorFile";const a=1e6,u=-1001e3;var l,s,i,o;e.LuaType=void 0,(o=e.LuaType||(e.LuaType={}))[o.None=-1]="None",o[o.Nil=0]="Nil",o[o.Boolean=1]="Boolean",o[o.LightUserdata=2]="LightUserdata",o[o.Number=3]="Number",o[o.String=4]="String",o[o.Table=5]="Table",o[o.Function=6]="Function",o[o.Userdata=7]="Userdata",o[o.Thread=8]="Thread",e.LuaEventCodes=void 0,(i=e.LuaEventCodes||(e.LuaEventCodes={}))[i.Call=0]="Call",i[i.Ret=1]="Ret",i[i.Line=2]="Line",i[i.Count=3]="Count",i[i.TailCall=4]="TailCall",e.LuaEventMasks=void 0,(s=e.LuaEventMasks||(e.LuaEventMasks={}))[s.Call=1]="Call",s[s.Ret=2]="Ret",s[s.Line=4]="Line",s[s.Count=8]="Count",e.LuaLibraries=void 0,(l=e.LuaLibraries||(e.LuaLibraries={})).Base="_G",l.Coroutine="coroutine",l.Table="table",l.IO="io",l.OS="os",l.String="string",l.UTF8="utf8",l.Math="math",l.Debug="debug",l.Package="package";class c extends Error{}class d{constructor(e,t){this.target=e,this.options=t}}class h extends Number{}class p extends Array{}class f{constructor(e,t,r,n){this.closed=!1,this.lua=e,this.typeExtensions=t,this.address=r,this.parent=n}newThread(){const e=this.lua.lua_newthread(this.address);if(!e)throw new Error("lua_newthread returned a null pointer");return new f(this.lua,this.typeExtensions,e)}resetThread(){this.assertOk(this.lua.lua_resetthread(this.address))}loadString(e,t){const r=this.lua.module.lengthBytesUTF8(e),n=r+1,a=this.lua.module._malloc(n);try{this.lua.module.stringToUTF8(e,a,n),this.assertOk(this.lua.luaL_loadbufferx(this.address,a,r,null!=t?t:a,null))}finally{this.lua.module._free(a)}}loadFile(e){this.assertOk(this.lua.luaL_loadfilex(this.address,e,null))}resume(e=0){const t=this.lua.module._malloc(4);try{return this.lua.module.setValue(t,0,"i32"),{result:this.lua.lua_resume(this.address,null,e,t),resultCount:this.lua.module.getValue(t,"i32")}}finally{this.lua.module._free(t)}}getTop(){return this.lua.lua_gettop(this.address)}setTop(e){this.lua.lua_settop(this.address,e)}remove(e){return this.lua.lua_remove(this.address,e)}setField(e,t,r){e=this.lua.lua_absindex(this.address,e),this.pushValue(r),this.lua.lua_setfield(this.address,e,t)}async run(t=0,r){const n=this.timeout;try{void 0!==(null==r?void 0:r.timeout)&&this.setTimeout(Date.now()+r.timeout);let n=this.resume(t);for(;n.result===e.LuaReturn.Yield;){if(this.timeout&&Date.now()>this.timeout)throw n.resultCount>0&&this.pop(n.resultCount),new c("thread timeout exceeded");if(n.resultCount>0){const e=this.getValue(-1);this.pop(n.resultCount),e===Promise.resolve(e)?await e:await new Promise((e=>setImmediate(e)))}else await new Promise((e=>setImmediate(e)));n=this.resume(0)}return this.assertOk(n.result),this.getStackValues()}finally{void 0!==(null==r?void 0:r.timeout)&&this.setTimeout(n)}}runSync(e=0){const t=this.getTop()-e-1;return this.assertOk(this.lua.lua_pcallk(this.address,e,-1,0,0,null)),this.getStackValues(t)}pop(e=1){this.lua.lua_pop(this.address,e)}call(t,...r){const n=this.lua.lua_getglobal(this.address,t);if(n!==e.LuaType.Function)throw new Error(`A function of type '${n}' was pushed, expected is ${e.LuaType.Function}`);for(const e of r)this.pushValue(e);const a=this.getTop()-r.length-1;return this.lua.lua_callk(this.address,r.length,-1,0,null),this.getStackValues(a)}getStackValues(e=0){const t=this.getTop()-e,r=new p(t);for(let n=0;n<t;n++)r[n]=this.getValue(e+n+1);return r}stateToThread(e){var t;return e===(null===(t=this.parent)||void 0===t?void 0:t.address)?this.parent:new f(this.lua,this.typeExtensions,e,this.parent||this)}pushValue(e,t){var r;const n=this.getValueDecorations(e),a=null!==(r=n.target)&&void 0!==r?r:void 0;if(a instanceof f)return void(1===this.lua.lua_pushthread(a.address)||this.lua.lua_xmove(a.address,this.address,1));const u=this.getTop();switch(typeof a){case"undefined":this.lua.lua_pushnil(this.address);break;case"number":Number.isInteger(a)?this.lua.lua_pushinteger(this.address,a):this.lua.lua_pushnumber(this.address,a);break;case"string":this.lua.lua_pushstring(this.address,a);break;case"boolean":this.lua.lua_pushboolean(this.address,a?1:0);break;default:if(!this.typeExtensions.find((e=>e.extension.pushValue(this,n,t))))throw new Error(`The type '${typeof a}' is not supported by Lua`)}if(n.options.metatable&&this.setMetatable(-1,n.options.metatable),this.getTop()!==u+1)throw new Error(`pushValue expected stack size ${u+1}, got ${this.getTop()}`)}setMetatable(e,t){if(e=this.lua.lua_absindex(this.address,e),this.lua.lua_getmetatable(this.address,e)){this.pop(1);const t=this.getMetatableName(e);throw new Error(`data already has associated metatable: ${t||"unknown name"}`)}this.pushValue(t),this.lua.lua_setmetatable(this.address,e)}getMetatableName(t){const r=this.lua.luaL_getmetafield(this.address,t,"__name");if(r===e.LuaType.Nil)return;if(r!==e.LuaType.String)return void this.pop(1);const n=this.lua.lua_tolstring(this.address,-1,null);return this.pop(1),n}getValue(t,r,n){t=this.lua.lua_absindex(this.address,t);const a=null!=r?r:this.lua.lua_type(this.address,t);switch(a){case e.LuaType.None:return;case e.LuaType.Nil:return null;case e.LuaType.Number:return this.lua.lua_tonumberx(this.address,t,null);case e.LuaType.String:return this.lua.lua_tolstring(this.address,t,null);case e.LuaType.Boolean:return Boolean(this.lua.lua_toboolean(this.address,t));case e.LuaType.Thread:return this.stateToThread(this.lua.lua_tothread(this.address,t));default:{let r;a!==e.LuaType.Table&&a!==e.LuaType.Userdata||(r=this.getMetatableName(t));const u=this.typeExtensions.find((e=>e.extension.isType(this,t,a,r)));return u?u.extension.getValue(this,t,n):(console.warn(`The type '${this.lua.lua_typename(this.address,a)}' returned is not supported on JS`),new h(this.lua.lua_topointer(this.address,t)))}}}close(){this.isClosed()||(this.hookFunctionPointer&&this.lua.module.removeFunction(this.hookFunctionPointer),this.closed=!0)}setTimeout(t){t&&t>0?(this.hookFunctionPointer||(this.hookFunctionPointer=this.lua.module.addFunction((()=>{Date.now()>t&&(this.pushValue(new c("thread timeout exceeded")),this.lua.lua_error(this.address))}),"vii")),this.lua.lua_sethook(this.address,this.hookFunctionPointer,e.LuaEventMasks.Count,1e3),this.timeout=t):this.hookFunctionPointer&&(this.hookFunctionPointer=void 0,this.timeout=void 0,this.lua.lua_sethook(this.address,null,0,0))}getTimeout(){return this.timeout}getPointer(e){return new h(this.lua.lua_topointer(this.address,e))}isClosed(){var e;return!this.address||this.closed||Boolean(null===(e=this.parent)||void 0===e?void 0:e.isClosed())}indexToString(e){const t=this.lua.luaL_tolstring(this.address,e,null);return this.pop(),t}dumpStack(e=console.log){const t=this.getTop();for(let r=1;r<=t;r++){const t=this.lua.lua_type(this.address,r);e(r,this.lua.lua_typename(this.address,t),this.getPointer(r),this.indexToString(r),this.getValue(r,t))}}assertOk(t){if(t!==e.LuaReturn.Ok&&t!==e.LuaReturn.Yield){const r=e.LuaReturn[t],n=new Error(`Lua Error(${r}/${t})`);if(this.getTop()>0)if(t===e.LuaReturn.ErrorMem)n.message=this.lua.lua_tolstring(this.address,-1,null);else{const e=this.getValue(-1);e instanceof Error&&(n.stack=e.stack),n.message=this.indexToString(-1)}if(t!==e.LuaReturn.ErrorMem)try{this.lua.luaL_traceback(this.address,this.address,null,1);const e=this.lua.lua_tolstring(this.address,-1,null);"stack traceback:"!==e.trim()&&(n.message=`${n.message}\n${e}`),this.pop(1)}catch(e){console.warn("Failed to generate stack trace",e)}throw n}}getValueDecorations(e){return e instanceof d?e:new d(e,{})}}class m extends f{constructor(e,t){if(t){const t={memoryUsed:0},r=e.module.addFunction(((r,n,a,u)=>{if(0===u)return n&&(t.memoryUsed-=a,e.module._free(n)),0;const l=n?u-a:u,s=t.memoryUsed+l;if(u>a&&t.memoryMax&&s>t.memoryMax)return 0;const i=e.module._realloc(n,u);return i&&(t.memoryUsed=s),i}),"iiiii");super(e,[],e.lua_newstate(r,null)),this.memoryStats=t,this.allocatorFunctionPointer=r}else super(e,[],e.luaL_newstate());if(this.isClosed())throw new Error("Global state could not be created (probably due to lack of memory)")}close(){if(!this.isClosed()){super.close(),this.lua.lua_close(this.address),this.allocatorFunctionPointer&&this.lua.module.removeFunction(this.allocatorFunctionPointer);for(const e of this.typeExtensions)e.extension.close()}}registerTypeExtension(e,t){this.typeExtensions.push({extension:t,priority:e}),this.typeExtensions.sort(((e,t)=>t.priority-e.priority))}loadLibrary(t){switch(t){case e.LuaLibraries.Base:this.lua.luaopen_base(this.address);break;case e.LuaLibraries.Coroutine:this.lua.luaopen_coroutine(this.address);break;case e.LuaLibraries.Table:this.lua.luaopen_table(this.address);break;case e.LuaLibraries.IO:this.lua.luaopen_io(this.address);break;case e.LuaLibraries.OS:this.lua.luaopen_os(this.address);break;case e.LuaLibraries.String:case e.LuaLibraries.UTF8:this.lua.luaopen_string(this.address);break;case e.LuaLibraries.Math:this.lua.luaopen_math(this.address);break;case e.LuaLibraries.Debug:this.lua.luaopen_debug(this.address);break;case e.LuaLibraries.Package:this.lua.luaopen_package(this.address)}this.lua.lua_setglobal(this.address,t)}get(e){const t=this.lua.lua_getglobal(this.address,e),r=this.getValue(-1,t);return this.pop(),r}set(e,t){this.pushValue(t),this.lua.lua_setglobal(this.address,e)}getTable(t,r){const n=this.getTop(),a=this.lua.lua_getglobal(this.address,t);try{if(a!==e.LuaType.Table)throw new TypeError(`Unexpected type in ${t}. Expected ${e.LuaType[e.LuaType.Table]}. Got ${e.LuaType[a]}.`);r(n+1)}finally{this.getTop()!==n+1&&console.warn(`getTable: expected stack size ${n} got ${this.getTop()}`),this.setTop(n)}}getMemoryUsed(){return this.getMemoryStatsRef().memoryUsed}getMemoryMax(){return this.getMemoryStatsRef().memoryMax}setMemoryMax(e){this.getMemoryStatsRef().memoryMax=e}getMemoryStatsRef(){if(!this.memoryStats)throw new Error("Memory allocations is not being traced, please build engine with { traceAllocations: true }");return this.memoryStats}}class _{constructor(e,t){this.thread=e,this.name=t}isType(t,r,n,a){return n===e.LuaType.Userdata&&a===this.name}getValue(e,t,r){const n=e.lua.luaL_testudata(e.address,t,this.name);if(!n)throw new Error(`data does not have the expected metatable: ${this.name}`);const a=e.lua.module.getValue(n,"*");return e.lua.getRef(a)}pushValue(t,r,n){const{target:a}=r,u=t.lua.ref(a),l=t.lua.lua_newuserdatauv(t.address,4,0);if(t.lua.module.setValue(l,u,"*"),e.LuaType.Nil===t.lua.luaL_getmetatable(t.address,this.name))throw t.pop(2),new Error(`metatable not found: ${this.name}`);return t.lua.lua_setmetatable(t.address,-2),!0}}class b extends _{constructor(t,r){if(super(t,"js_error"),this.gcPointer=t.lua.module.addFunction((r=>{const n=t.lua.luaL_checkudata(r,1,this.name),a=t.lua.module.getValue(n,"*");return t.lua.unref(a),e.LuaReturn.Ok}),"ii"),t.lua.luaL_newmetatable(t.address,this.name)){const e=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,e,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,e,"__gc"),t.pushValue(((e,t)=>"message"===t?e.message:null)),t.lua.lua_setfield(t.address,e,"__index"),t.pushValue((e=>e.message)),t.lua.lua_setfield(t.address,e,"__tostring")}t.lua.lua_pop(t.address,1),r&&t.set("Error",{create:e=>{if(e&&"string"!=typeof e)throw new Error("message must be a string");return new Error(e)}})}pushValue(e,t){return t.target instanceof Error&&super.pushValue(e,t)}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}class g{constructor(e){this.count=e}}function w(e,t){return new d(e,t)}class y extends _{constructor(t){super(t,"js_function"),this.functionRegistry="undefined"!=typeof FinalizationRegistry?new FinalizationRegistry((e=>{this.thread.isClosed()||this.thread.lua.luaL_unref(this.thread.address,u,e)})):void 0,this.functionRegistry||console.warn("FunctionTypeExtension: FinalizationRegistry not found. Memory leaks likely."),this.gcPointer=t.lua.module.addFunction((r=>{t.lua.luaL_checkudata(r,1,this.name);const n=t.lua.luaL_checkudata(r,1,this.name),a=t.lua.module.getValue(n,"*");return t.lua.unref(a),e.LuaReturn.Ok}),"ii"),t.lua.luaL_newmetatable(t.address,this.name)&&(t.lua.lua_pushstring(t.address,"__gc"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_settable(t.address,-3),t.lua.lua_pushstring(t.address,"__metatable"),t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_settable(t.address,-3)),t.lua.lua_pop(t.address,1),this.functionWrapper=t.lua.module.addFunction((e=>{const r=t.stateToThread(e),n=t.lua.luaL_checkudata(e,t.lua.lua_upvalueindex(1),this.name),a=t.lua.module.getValue(n,"*"),{target:u,options:l}=t.lua.getRef(a),s=r.getTop(),i=[];if(l.receiveThread&&i.push(r),l.receiveArgsQuantity)i.push(s);else for(let e=1;e<=s;e++){const t=r.getValue(e);1===e&&(null==l?void 0:l.self)&&t===l.self||i.push(t)}try{const e=u.apply(null==l?void 0:l.self,i);if(void 0===e)return 0;if(e instanceof g)return e.count;if(e instanceof p){for(const t of e)r.pushValue(t);return e.length}return r.pushValue(e),1}catch(e){if(e===1/0)throw e;return r.pushValue(e),r.lua.lua_error(r.address)}}),"ii")}close(){this.thread.lua.module.removeFunction(this.gcPointer),this.thread.lua.module.removeFunction(this.functionWrapper)}isType(t,r,n){return n===e.LuaType.Function}pushValue(t,r){if("function"!=typeof r.target)return!1;const n=t.lua.ref(r),a=t.lua.lua_newuserdatauv(t.address,4,0);if(t.lua.module.setValue(a,n,"*"),e.LuaType.Nil===t.lua.luaL_getmetatable(t.address,this.name))throw t.pop(1),t.lua.unref(n),new Error(`metatable not found: ${this.name}`);return t.lua.lua_setmetatable(t.address,-2),t.lua.lua_pushcclosure(t.address,this.functionWrapper,1),!0}getValue(t,r){var n;t.lua.lua_pushvalue(t.address,r);const a=t.lua.luaL_ref(t.address,u),l=(...r)=>{if(t.isClosed())return void console.warn("Tried to call a function after closing lua state");const n=t.lua.lua_rawgeti(t.address,u,a);if(n!==e.LuaType.Function){const r=t.lua.luaL_getmetafield(t.address,-1,"__call");if(t.pop(),r!==e.LuaType.Function)throw new Error(`A value of type '${n}' was pushed but it is not callable`)}for(const e of r)t.pushValue(e);const l=t.lua.lua_pcallk(t.address,r.length,1,0,0,null);if(l===e.LuaReturn.Yield)throw new Error("cannot yield in callbacks from javascript");t.assertOk(l);const s=t.getValue(-1);return t.pop(),s};return null===(n=this.functionRegistry)||void 0===n||n.register(l,a),l}}class v extends _{constructor(t,r){if(super(t,"js_promise"),this.gcPointer=t.lua.module.addFunction((r=>{const n=t.lua.luaL_checkudata(r,1,this.name),a=t.lua.module.getValue(n,"*");return t.lua.unref(a),e.LuaReturn.Ok}),"ii"),t.lua.luaL_newmetatable(t.address,this.name)){const e=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,e,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,e,"__gc");const r=e=>{if(Promise.resolve(e)!==e)throw new Error("promise method called without self instance");return!0};t.pushValue({next:(e,...t)=>r(e)&&e.then(...t),catch:(e,...t)=>r(e)&&e.catch(...t),finally:(e,...t)=>r(e)&&e.finally(...t),await:w(((e,n)=>{if(r(n),e.address===t.address)throw new Error("cannot await in the main thread");let a;const u=n.then((e=>{a={status:"fulfilled",value:e}})).catch((e=>{a={status:"rejected",value:e}})),l=this.thread.lua.module.addFunction((r=>{if(!a)return t.lua.lua_yieldk(e.address,0,0,l);this.thread.lua.module.removeFunction(l);const n=t.stateToThread(r);if("rejected"===a.status)return n.pushValue(a.value||new Error("promise rejected with no error")),this.thread.lua.lua_error(r);if(a.value instanceof g)return a.value.count;if(a.value instanceof p){for(const e of a.value)n.pushValue(e);return a.value.length}return n.pushValue(a.value),1}),"iiii");return e.pushValue(u),new g(t.lua.lua_yieldk(e.address,1,0,l))}),{receiveThread:!0})}),t.lua.lua_setfield(t.address,e,"__index"),t.pushValue(((e,t)=>e===t)),t.lua.lua_setfield(t.address,e,"__eq")}t.lua.lua_pop(t.address,1),r&&t.set("Promise",{create:e=>new Promise(e),all:e=>{if(!Array.isArray(e))throw new Error("argument must be an array of promises");return Promise.all(e.map((e=>Promise.resolve(e))))},resolve:e=>Promise.resolve(e)})}close(){this.thread.lua.module.removeFunction(this.gcPointer)}pushValue(e,t){return Promise.resolve(t.target)===t.target&&super.pushValue(e,t)}}function L(e,t){return new d(e,t||{})}class k extends _{constructor(t){if(super(t,"js_proxy"),this.gcPointer=t.lua.module.addFunction((r=>{const n=t.lua.luaL_checkudata(r,1,this.name),a=t.lua.module.getValue(n,"*");return t.lua.unref(a),e.LuaReturn.Ok}),"ii"),t.lua.luaL_newmetatable(t.address,this.name)){const e=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,e,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,e,"__gc"),t.pushValue(((e,t)=>{switch(typeof t){case"number":t-=1;case"string":break;default:throw new Error("Only strings or numbers can index js objects")}const r=e[t];return"function"==typeof r?w(r,{self:e}):r})),t.lua.lua_setfield(t.address,e,"__index"),t.pushValue(((e,t,r)=>{switch(typeof t){case"number":t-=1;case"string":break;default:throw new Error("Only strings or numbers can index js objects")}e[t]=r})),t.lua.lua_setfield(t.address,e,"__newindex"),t.pushValue((e=>{var t,r;return null!==(r=null===(t=e.toString)||void 0===t?void 0:t.call(e))&&void 0!==r?r:typeof e})),t.lua.lua_setfield(t.address,e,"__tostring"),t.pushValue((e=>e.length||0)),t.lua.lua_setfield(t.address,e,"__len"),t.pushValue((e=>{const t=Object.getOwnPropertyNames(e);let r=0;return p.of((()=>{const n=p.of(t[r],e[t[r]]);return r++,n}),e,null)})),t.lua.lua_setfield(t.address,e,"__pairs"),t.pushValue(((e,t)=>e===t)),t.lua.lua_setfield(t.address,e,"__eq"),t.pushValue(((e,...t)=>(t[0]===e&&t.shift(),e(...t)))),t.lua.lua_setfield(t.address,e,"__call")}t.lua.lua_pop(t.address,1)}isType(t,r,n,a){return n===e.LuaType.Userdata&&a===this.name}getValue(e,t){const r=e.lua.lua_touserdata(e.address,t),n=e.lua.module.getValue(r,"*");return e.lua.getRef(n)}pushValue(e,t){var r;const{target:n,options:a}=t;if(void 0===a.proxy){if(null==n)return!1;if("object"!=typeof n&&("function"!=typeof n||(null===(r=n.prototype)||void 0===r?void 0:r.constructor)!==n||!n.toString().startsWith("class ")))return!1;if(Promise.resolve(n)===n)return!1}else if(!1===a.proxy)return!1;return!a.metatable||a.metatable instanceof d?super.pushValue(e,t):(t.options.metatable=L(a.metatable,{proxy:!1}),!1)}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}class T extends _{constructor(e){super(e,"js_table")}close(){}isType(t,r,n){return n===e.LuaType.Table}getValue(e,t,r){const n=r||new Map,a=e.lua.lua_topointer(e.address,t);let u=n.get(a);if(!u){const r=this.readTableKeys(e,t),l=r.length>0&&r.every(((e,t)=>e===String(t+1)));u=l?[]:{},n.set(a,u),this.readTableValues(e,t,n,u)}return u}pushValue(e,{target:t},r){if("object"!=typeof t||null===t)return!1;const n=r||new Map,a=n.get(t);if(void 0!==a)return e.lua.lua_rawgeti(e.address,u,a),!0;try{const r=e.getTop()+1,a=(r,a)=>{e.lua.lua_createtable(e.address,r,a);const l=e.lua.luaL_ref(e.address,u);n.set(t,l),e.lua.lua_rawgeti(e.address,u,l)};if(Array.isArray(t)){a(t.length,0);for(let a=0;a<t.length;a++)e.pushValue(a+1,n),e.pushValue(t[a],n),e.lua.lua_settable(e.address,r)}else{a(0,Object.getOwnPropertyNames(t).length);for(const a in t)e.pushValue(a,n),e.pushValue(t[a],n),e.lua.lua_settable(e.address,r)}}finally{if(void 0===r)for(const t of n.values())e.lua.luaL_unref(e.address,u,t)}return!0}readTableKeys(e,t){const r=[];for(e.lua.lua_pushnil(e.address);e.lua.lua_next(e.address,t);){const t=e.indexToString(-2);r.push(t),e.pop()}return r}readTableValues(e,t,r,n){const a=Array.isArray(n);for(e.lua.lua_pushnil(e.address);e.lua.lua_next(e.address,t);){const t=e.indexToString(-2),u=e.getValue(-1,void 0,r);a?n.push(u):n[t]=u,e.pop()}}}class E extends _{constructor(t){if(super(t,"js_userdata"),this.gcPointer=t.lua.module.addFunction((r=>{const n=t.lua.luaL_checkudata(r,1,this.name),a=t.lua.module.getValue(n,"*");return t.lua.unref(a),e.LuaReturn.Ok}),"ii"),t.lua.luaL_newmetatable(t.address,this.name)){const e=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,e,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,e,"__gc")}t.lua.lua_pop(t.address,1)}isType(t,r,n,a){return n===e.LuaType.Userdata&&a===this.name}getValue(e,t){const r=e.lua.lua_touserdata(e.address,t),n=e.lua.module.getValue(r,"*");return e.lua.getRef(n)}pushValue(e,t){return!!t.options.reference&&super.pushValue(e,t)}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}class x{constructor(e,{openStandardLibs:t=!0,injectObjects:r=!1,enableProxy:n=!0,traceAllocations:a=!1}={}){var u;this.cmodule=e,this.global=new m(this.cmodule,a),this.global.registerTypeExtension(0,(u=this.global,new T(u))),this.global.registerTypeExtension(0,function(e){return new y(e)}(this.global)),this.global.registerTypeExtension(1,function(e,t){return new v(e,t)}(this.global,r)),n?this.global.registerTypeExtension(3,function(e){return new k(e)}(this.global)):this.global.registerTypeExtension(1,function(e,t){return new b(e,t)}(this.global,r)),this.global.registerTypeExtension(4,function(e){return new E(e)}(this.global)),t&&this.cmodule.luaL_openlibs(this.global.address)}doString(e){return this.callByteCode((t=>t.loadString(e)))}doFile(e){return this.callByteCode((t=>t.loadFile(e)))}doStringSync(e){return this.global.loadString(e),this.global.runSync()[0]}doFileSync(e){return this.global.loadFile(e),this.global.runSync()[0]}async callByteCode(e){const t=this.global.newThread(),r=this.global.getTop();try{e(t);const r=await t.run(0);return r.length>0&&this.cmodule.lua_xmove(t.address,this.global.address,r.length),r[0]}finally{this.global.remove(r)}}}var z,M=(z="undefined"==typeof document&&"undefined"==typeof location?new(r(54058).URL)("file:"+n).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href,async function(e={}){var t,a,u;t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){a=e,u=t}));var l,s,i,o=Object.assign({},t),c="./this.program",d=(e,t)=>{throw t},h="object"==typeof window,p="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";if(f){const{createRequire:e}=await r.e(9230).then(r.t.bind(r,59230,23));var _=e("undefined"==typeof document&&"undefined"==typeof location?new(r(54058).URL)("file:"+n).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href),b=_("fs"),g=_("path");m=p?g.dirname(m)+"/":_("url").fileURLToPath(new URL("./","undefined"==typeof document&&"undefined"==typeof location?new(r(54058).URL)("file:"+n).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href)),l=(e,t)=>(e=e.startsWith("file://")?new URL(e):g.normalize(e),b.readFileSync(e,t?void 0:"utf8")),i=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),s=(e,t,r)=>{e=e.startsWith("file://")?new URL(e):g.normalize(e),b.readFile(e,(function(e,n){e?r(e):t(n.buffer)}))},1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),d=(e,t)=>{if(L)throw process.exitCode=e,t;if(!(t instanceof ne)){var r=t;t&&"object"==typeof t&&t.stack&&(r=[t,t.stack]),v("exiting due to exception: "+r)}process.exit(e)},t.inspect=function(){return"[Emscripten Module object]"}}else(h||p)&&(p?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),z&&(m=z),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var w,y=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);Object.assign(t,o),o=null,t.thisProgram&&(c=t.thisProgram),t.quit&&(d=t.quit),t.wasmBinary&&(w=t.wasmBinary);var L=t.noExitRuntime||!0;"object"!=typeof WebAssembly&&Q("no native wasm support detected");var k,T,E,x,M,F,A,S,R=!1,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t){for(var r=t+NaN,n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&C)return C.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var u=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|u);else{var l=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|u<<6|l:(7&a)<<18|u<<12|l<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function V(e){return e?D(E,e):""}function U(e,t,r,n){if(!(0<n))return 0;var a=r;n=r+n-1;for(var u=0;u<e.length;++u){var l=e.charCodeAt(u);if(55296<=l&&57343>=l&&(l=65536+((1023&l)<<10)|1023&e.charCodeAt(++u)),127>=l){if(r>=n)break;t[r++]=l}else{if(2047>=l){if(r+1>=n)break;t[r++]=192|l>>6}else{if(65535>=l){if(r+2>=n)break;t[r++]=224|l>>12}else{if(r+3>=n)break;t[r++]=240|l>>18,t[r++]=128|l>>12&63}t[r++]=128|l>>6&63}t[r++]=128|63&l}}return t[r]=0,r-a}function O(e,t,r){return U(e,E,t,r)}function P(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t}function B(){var e=k.buffer;t.HEAP8=T=new Int8Array(e),t.HEAP16=x=new Int16Array(e),t.HEAP32=M=new Int32Array(e),t.HEAPU8=E=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=F=new Uint32Array(e),t.HEAPF32=A=new Float32Array(e),t.HEAPF64=S=new Float64Array(e)}var j,I=[],H=[],N=[];function W(){var e=t.preRun.shift();I.unshift(e)}var Y,G,$,q=0,X=null;function J(){q++,t.monitorRunDependencies&&t.monitorRunDependencies(q)}function K(){if(q--,t.monitorRunDependencies&&t.monitorRunDependencies(q),0==q&&X){var e=X;X=null,e()}}function Q(e){throw t.onAbort&&t.onAbort(e),v(e="Aborted("+e+")"),R=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e}function Z(e){return e.startsWith("data:application/octet-stream;base64,")}if(t.locateFile){if(!Z(Y="glue.wasm")){var ee=Y;Y=t.locateFile?t.locateFile(ee,m):m+ee}}else Y=new URL("glue.wasm","undefined"==typeof document&&"undefined"==typeof location?new(r(54058).URL)("file:"+n).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("index.js",document.baseURI).href).href;function te(e){try{if(e==Y&&w)return new Uint8Array(w);if(i)return i(e);throw"both async and sync fetching of the wasm failed"}catch(e){Q(e)}}function re(e,t,r){return function(e){if(!w&&(h||p)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((function(){return te(e)}));if(s)return new Promise((function(t,r){s(e,(function(e){t(new Uint8Array(e))}),r)}))}return Promise.resolve().then((function(){return te(e)}))}(e).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(r,(function(e){v("failed to asynchronously prepare wasm: "+e),Q(e)}))}function ne(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ae(e){for(;0<e.length;)e.shift()(t)}var ue=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},le=e=>{var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=ue(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},se=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ie=e=>{if("/"===e)return"/";var t=(e=(e=le(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)};function oe(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if("string"!=typeof(t=0<=r?arguments[r]:ge.cwd()))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=ue(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}var ce=(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=oe(e).substr(1),t=oe(t).substr(1),e=r(e.split("/")),t=r(t.split("/"));for(var n=Math.min(e.length,t.length),a=n,u=0;u<n;u++)if(e[u]!==t[u]){a=u;break}for(n=[],u=a;u<e.length;u++)n.push("..");return(n=n.concat(t.slice(a))).join("/")};function de(e,t){var r=Array(P(e)+1);return e=U(e,r,0,r.length),t&&(r.length=e),r}var he=[];function pe(e,t){he[e]={input:[],output:[],bd:t},ge.Md(e,fe)}var fe={open:function(e){var t=he[e.node.rdev];if(!t)throw new ge.zc(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.bd.fsync(e.tty)},fsync:function(e){e.tty.bd.fsync(e.tty)},read:function(e,t,r,n){if(!e.tty||!e.tty.bd.Zd)throw new ge.zc(60);for(var a=0,u=0;u<n;u++){try{var l=e.tty.bd.Zd(e.tty)}catch(e){throw new ge.zc(29)}if(void 0===l&&0===a)throw new ge.zc(6);if(null==l)break;a++,t[r+u]=l}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n){if(!e.tty||!e.tty.bd.Jd)throw new ge.zc(60);try{for(var a=0;a<n;a++)e.tty.bd.Jd(e.tty,t[r+a])}catch(e){throw new ge.zc(29)}return n&&(e.node.timestamp=Date.now()),a}},me={Zd:function(e){if(!e.input.length){var t=null;if(f){var r=Buffer.alloc(256),n=0;try{n=b.readSync(process.stdin.fd,r,0,256,-1)}catch(e){if(!e.toString().includes("EOF"))throw e;n=0}t=0<n?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=de(t,!0)}return e.input.shift()},Jd:function(e,t){null===t||10===t?(y(D(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(y(D(e.output,0)),e.output=[])}},_e={Jd:function(e,t){null===t||10===t?(v(D(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(v(D(e.output,0)),e.output=[])}},be={Nc:null,Fc:function(){return be.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(ge.xe(r)||ge.isFIFO(r))throw new ge.zc(63);return be.Nc||(be.Nc={dir:{node:{Kc:be.Ac.Kc,Ic:be.Ac.Ic,lookup:be.Ac.lookup,Qc:be.Ac.Qc,rename:be.Ac.rename,unlink:be.Ac.unlink,rmdir:be.Ac.rmdir,readdir:be.Ac.readdir,symlink:be.Ac.symlink},stream:{Lc:be.Cc.Lc}},file:{node:{Kc:be.Ac.Kc,Ic:be.Ac.Ic},stream:{Lc:be.Cc.Lc,read:be.Cc.read,write:be.Cc.write,dd:be.Cc.dd,ad:be.Cc.ad,kd:be.Cc.kd}},link:{node:{Kc:be.Ac.Kc,Ic:be.Ac.Ic,readlink:be.Ac.readlink},stream:{}},Rd:{node:{Kc:be.Ac.Kc,Ic:be.Ac.Ic},stream:ge.me}}),r=ge.createNode(e,t,r,n),ge.Hc(r.mode)?(r.Ac=be.Nc.dir.node,r.Cc=be.Nc.dir.stream,r.Bc={}):ge.isFile(r.mode)?(r.Ac=be.Nc.file.node,r.Cc=be.Nc.file.stream,r.Ec=0,r.Bc=null):ge.gd(r.mode)?(r.Ac=be.Nc.link.node,r.Cc=be.Nc.link.stream):ge.nd(r.mode)&&(r.Ac=be.Nc.Rd.node,r.Cc=be.Nc.Rd.stream),r.timestamp=Date.now(),e&&(e.Bc[t]=r,e.timestamp=r.timestamp),r},Ve:function(e){return e.Bc?e.Bc.subarray?e.Bc.subarray(0,e.Ec):new Uint8Array(e.Bc):new Uint8Array(0)},Wd:function(e,t){var r=e.Bc?e.Bc.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),0!=r&&(t=Math.max(t,256)),r=e.Bc,e.Bc=new Uint8Array(t),0<e.Ec&&e.Bc.set(r.subarray(0,e.Ec),0))},He:function(e,t){if(e.Ec!=t)if(0==t)e.Bc=null,e.Ec=0;else{var r=e.Bc;e.Bc=new Uint8Array(t),r&&e.Bc.set(r.subarray(0,Math.min(t,e.Ec))),e.Ec=t}},Ac:{Kc:function(e){var t={};return t.dev=ge.nd(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ge.Hc(e.mode)?t.size=4096:ge.isFile(e.mode)?t.size=e.Ec:ge.gd(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.ke=4096,t.blocks=Math.ceil(t.size/t.ke),t},Ic:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&be.He(e,t.size)},lookup:function(){throw ge.zd[44]},Qc:function(e,t,r,n){return be.createNode(e,t,r,n)},rename:function(e,t,r){if(ge.Hc(e.mode)){try{var n=ge.Pc(t,r)}catch(e){}if(n)for(var a in n.Bc)throw new ge.zc(55)}delete e.parent.Bc[e.name],e.parent.timestamp=Date.now(),e.name=r,t.Bc[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Bc[t],e.timestamp=Date.now()},rmdir:function(e,t){var r,n=ge.Pc(e,t);for(r in n.Bc)throw new ge.zc(55);delete e.Bc[t],e.timestamp=Date.now()},readdir:function(e){var t,r=[".",".."];for(t in e.Bc)e.Bc.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,t,r){return(e=be.createNode(e,t,41471,0)).link=r,e},readlink:function(e){if(!ge.gd(e.mode))throw new ge.zc(28);return e.link}},Cc:{read:function(e,t,r,n,a){var u=e.node.Bc;if(a>=e.node.Ec)return 0;if(8<(e=Math.min(e.node.Ec-a,n))&&u.subarray)t.set(u.subarray(a,a+e),r);else for(n=0;n<e;n++)t[r+n]=u[a+n];return e},write:function(e,t,r,n,a,u){if(t.buffer===T.buffer&&(u=!1),!n)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.Bc||e.Bc.subarray)){if(u)return e.Bc=t.subarray(r,r+n),e.Ec=n;if(0===e.Ec&&0===a)return e.Bc=t.slice(r,r+n),e.Ec=n;if(a+n<=e.Ec)return e.Bc.set(t.subarray(r,r+n),a),n}if(be.Wd(e,a+n),e.Bc.subarray&&t.subarray)e.Bc.set(t.subarray(r,r+n),a);else for(u=0;u<n;u++)e.Bc[a+u]=t[r+u];return e.Ec=Math.max(e.Ec,a+n),n},Lc:function(e,t,r){if(1===r?t+=e.position:2===r&&ge.isFile(e.node.mode)&&(t+=e.node.Ec),0>t)throw new ge.zc(28);return t},dd:function(e,t,r){be.Wd(e.node,t+r),e.node.Ec=Math.max(e.node.Ec,t+r)},ad:function(e,t,r,n,a){if(!ge.isFile(e.node.mode))throw new ge.zc(43);if(e=e.node.Bc,2&a||e.buffer!==T.buffer){if((0<r||r+t<e.length)&&(e=e.subarray?e.subarray(r,r+t):Array.prototype.slice.call(e,r,r+t)),r=!0,Q(),!(t=void 0))throw new ge.zc(48);T.set(e,t)}else r=!1,t=e.byteOffset;return{bf:t,Pe:r}},kd:function(e,t,r,n){return be.Cc.write(e,t,0,n,r,!1),0}}};var ge={root:null,jd:[],Ud:{},streams:[],Ce:1,Mc:null,Td:"/",Dd:!1,ce:!0,zc:null,zd:{},ue:null,rd:0,Dc:(e,t={})=>{if(!(e=oe(e)))return{path:"",node:null};if(8<(t=Object.assign({xd:!0,Ld:0},t)).Ld)throw new ge.zc(32);e=e.split("/").filter((e=>!!e));for(var r=ge.root,n="/",a=0;a<e.length;a++){var u=a===e.length-1;if(u&&t.parent)break;if(r=ge.Pc(r,e[a]),n=le(n+"/"+e[a]),ge.Uc(r)&&(!u||u&&t.xd)&&(r=r.hd.root),!u||t.Jc)for(u=0;ge.gd(r.mode);)if(r=ge.readlink(n),n=oe(se(n),r),r=ge.Dc(n,{Ld:t.Ld+1}).node,40<u++)throw new ge.zc(32)}return{path:n,node:r}},Tc:e=>{for(var t;;){if(ge.od(e))return e=e.Fc.de,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Cd:(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ge.Mc.length},ae:e=>{var t=ge.Cd(e.parent.id,e.name);e.Wc=ge.Mc[t],ge.Mc[t]=e},be:e=>{var t=ge.Cd(e.parent.id,e.name);if(ge.Mc[t]===e)ge.Mc[t]=e.Wc;else for(t=ge.Mc[t];t;){if(t.Wc===e){t.Wc=e.Wc;break}t=t.Wc}},Pc:(e,t)=>{var r=ge.ze(e);if(r)throw new ge.zc(r,e);for(r=ge.Mc[ge.Cd(e.id,t)];r;r=r.Wc){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return ge.lookup(e,t)},createNode:(e,t,r,n)=>(e=new ge.ge(e,t,r,n),ge.ae(e),e),wd:e=>{ge.be(e)},od:e=>e===e.parent,Uc:e=>!!e.hd,isFile:e=>32768==(61440&e),Hc:e=>16384==(61440&e),gd:e=>40960==(61440&e),nd:e=>8192==(61440&e),xe:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),ve:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Be:e=>{var t=ge.ve[e];if(void 0===t)throw Error("Unknown file open mode: "+e);return t},Xd:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},Xc:(e,t)=>ge.ce?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,ze:e=>ge.Xc(e,"x")||(e.Ac.lookup?0:2),Id:(e,t)=>{try{return ge.Pc(e,t),20}catch(e){}return ge.Xc(e,"wx")},pd:(e,t,r)=>{try{var n=ge.Pc(e,t)}catch(e){return e.Gc}if(e=ge.Xc(e,"wx"))return e;if(r){if(!ge.Hc(n.mode))return 54;if(ge.od(n)||ge.Tc(n)===ge.cwd())return 10}else if(ge.Hc(n.mode))return 31;return 0},Ae:(e,t)=>e?ge.gd(e.mode)?32:ge.Hc(e.mode)&&("r"!==ge.Xd(t)||512&t)?31:ge.Xc(e,ge.Xd(t)):44,he:4096,De:(e=0,t=ge.he)=>{for(;e<=t;e++)if(!ge.streams[e])return e;throw new ge.zc(33)},$c:e=>ge.streams[e],vd:(e,t,r)=>(ge.ld||(ge.ld=function(){this.Rc={}},ge.ld.prototype={},Object.defineProperties(ge.ld.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},flags:{get:function(){return this.Rc.flags},set:function(e){this.Rc.flags=e}},position:{get:function(){return this.Rc.position},set:function(e){this.Rc.position=e}}})),e=Object.assign(new ge.ld,e),t=ge.De(t,r),e.fd=t,ge.streams[t]=e),ne:e=>{ge.streams[e]=null},me:{open:e=>{e.Cc=ge.we(e.node.rdev).Cc,e.Cc.open&&e.Cc.open(e)},Lc:()=>{throw new ge.zc(70)}},Hd:e=>e>>8,Ye:e=>255&e,Vc:(e,t)=>e<<8|t,Md:(e,t)=>{ge.Ud[e]={Cc:t}},we:e=>ge.Ud[e],Yd:e=>{var t=[];for(e=[e];e.length;){var r=e.pop();t.push(r),e.push.apply(e,r.jd)}return t},ee:(e,t)=>{function r(e){return ge.rd--,t(e)}function n(e){if(e){if(!n.te)return n.te=!0,r(e)}else++u>=a.length&&r(null)}"function"==typeof e&&(t=e,e=!1),ge.rd++,1<ge.rd&&v("warning: "+ge.rd+" FS.syncfs operations in flight at once, probably just doing extra work");var a=ge.Yd(ge.root.Fc),u=0;a.forEach((t=>{if(!t.type.ee)return n(null);t.type.ee(t,e,n)}))},Fc:(e,t,r)=>{var n="/"===r,a=!r;if(n&&ge.root)throw new ge.zc(10);if(!n&&!a){var u=ge.Dc(r,{xd:!1});if(r=u.path,u=u.node,ge.Uc(u))throw new ge.zc(10);if(!ge.Hc(u.mode))throw new ge.zc(54)}return t={type:e,af:t,de:r,jd:[]},(e=e.Fc(t)).Fc=t,t.root=e,n?ge.root=e:u&&(u.hd=t,u.Fc&&u.Fc.jd.push(t)),e},hf:e=>{if(e=ge.Dc(e,{xd:!1}),!ge.Uc(e.node))throw new ge.zc(28);var t=(e=e.node).hd,r=ge.Yd(t);Object.keys(ge.Mc).forEach((e=>{for(e=ge.Mc[e];e;){var t=e.Wc;r.includes(e.Fc)&&ge.wd(e),e=t}})),e.hd=null,e.Fc.jd.splice(e.Fc.jd.indexOf(t),1)},lookup:(e,t)=>e.Ac.lookup(e,t),Qc:(e,t,r)=>{var n=ge.Dc(e,{parent:!0}).node;if(!(e=ie(e))||"."===e||".."===e)throw new ge.zc(28);var a=ge.Id(n,e);if(a)throw new ge.zc(a);if(!n.Ac.Qc)throw new ge.zc(63);return n.Ac.Qc(n,e,t,r)},create:(e,t)=>ge.Qc(e,4095&(void 0!==t?t:438)|32768,0),mkdir:(e,t)=>ge.Qc(e,1023&(void 0!==t?t:511)|16384,0),Ze:(e,t)=>{e=e.split("/");for(var r="",n=0;n<e.length;++n)if(e[n]){r+="/"+e[n];try{ge.mkdir(r,t)}catch(e){if(20!=e.Gc)throw e}}},qd:(e,t,r)=>(void 0===r&&(r=t,t=438),ge.Qc(e,8192|t,r)),symlink:(e,t)=>{if(!oe(e))throw new ge.zc(44);var r=ge.Dc(t,{parent:!0}).node;if(!r)throw new ge.zc(44);t=ie(t);var n=ge.Id(r,t);if(n)throw new ge.zc(n);if(!r.Ac.symlink)throw new ge.zc(63);return r.Ac.symlink(r,t,e)},rename:(e,t)=>{var r=se(e),n=se(t),a=ie(e),u=ie(t),l=ge.Dc(e,{parent:!0}),s=l.node;if(l=(l=ge.Dc(t,{parent:!0})).node,!s||!l)throw new ge.zc(44);if(s.Fc!==l.Fc)throw new ge.zc(75);var i=ge.Pc(s,a);if("."!==(e=ce(e,n)).charAt(0))throw new ge.zc(28);if("."!==(e=ce(t,r)).charAt(0))throw new ge.zc(55);try{var o=ge.Pc(l,u)}catch(e){}if(i!==o){if(t=ge.Hc(i.mode),a=ge.pd(s,a,t))throw new ge.zc(a);if(a=o?ge.pd(l,u,t):ge.Id(l,u))throw new ge.zc(a);if(!s.Ac.rename)throw new ge.zc(63);if(ge.Uc(i)||o&&ge.Uc(o))throw new ge.zc(10);if(l!==s&&(a=ge.Xc(s,"w")))throw new ge.zc(a);ge.be(i);try{s.Ac.rename(i,l,u)}catch(e){throw e}finally{ge.ae(i)}}},rmdir:e=>{var t=ge.Dc(e,{parent:!0}).node;e=ie(e);var r=ge.Pc(t,e),n=ge.pd(t,e,!0);if(n)throw new ge.zc(n);if(!t.Ac.rmdir)throw new ge.zc(63);if(ge.Uc(r))throw new ge.zc(10);t.Ac.rmdir(t,e),ge.wd(r)},readdir:e=>{if(!(e=ge.Dc(e,{Jc:!0}).node).Ac.readdir)throw new ge.zc(54);return e.Ac.readdir(e)},unlink:e=>{var t=ge.Dc(e,{parent:!0}).node;if(!t)throw new ge.zc(44);e=ie(e);var r=ge.Pc(t,e),n=ge.pd(t,e,!1);if(n)throw new ge.zc(n);if(!t.Ac.unlink)throw new ge.zc(63);if(ge.Uc(r))throw new ge.zc(10);t.Ac.unlink(t,e),ge.wd(r)},readlink:e=>{if(!(e=ge.Dc(e).node))throw new ge.zc(44);if(!e.Ac.readlink)throw new ge.zc(28);return oe(ge.Tc(e.parent),e.Ac.readlink(e))},stat:(e,t)=>{if(!(e=ge.Dc(e,{Jc:!t}).node))throw new ge.zc(44);if(!e.Ac.Kc)throw new ge.zc(63);return e.Ac.Kc(e)},lstat:e=>ge.stat(e,!0),chmod:(e,t,r)=>{if(!(e="string"==typeof e?ge.Dc(e,{Jc:!r}).node:e).Ac.Ic)throw new ge.zc(63);e.Ac.Ic(e,{mode:4095&t|-4096&e.mode,timestamp:Date.now()})},lchmod:(e,t)=>{ge.chmod(e,t,!0)},fchmod:(e,t)=>{if(!(e=ge.$c(e)))throw new ge.zc(8);ge.chmod(e.node,t)},chown:(e,t,r,n)=>{if(!(e="string"==typeof e?ge.Dc(e,{Jc:!n}).node:e).Ac.Ic)throw new ge.zc(63);e.Ac.Ic(e,{timestamp:Date.now()})},lchown:(e,t,r)=>{ge.chown(e,t,r,!0)},fchown:(e,t,r)=>{if(!(e=ge.$c(e)))throw new ge.zc(8);ge.chown(e.node,t,r)},truncate:(e,t)=>{if(0>t)throw new ge.zc(28);if(!(e="string"==typeof e?ge.Dc(e,{Jc:!0}).node:e).Ac.Ic)throw new ge.zc(63);if(ge.Hc(e.mode))throw new ge.zc(31);if(!ge.isFile(e.mode))throw new ge.zc(28);var r=ge.Xc(e,"w");if(r)throw new ge.zc(r);e.Ac.Ic(e,{size:t,timestamp:Date.now()})},Ue:(e,t)=>{if(!(e=ge.$c(e)))throw new ge.zc(8);if(0==(2097155&e.flags))throw new ge.zc(28);ge.truncate(e.node,t)},jf:(e,t,r)=>{(e=ge.Dc(e,{Jc:!0}).node).Ac.Ic(e,{timestamp:Math.max(t,r)})},open:(e,r,n)=>{if(""===e)throw new ge.zc(44);if(n=64&(r="string"==typeof r?ge.Be(r):r)?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var a=e;else{e=le(e);try{a=ge.Dc(e,{Jc:!(131072&r)}).node}catch(e){}}var u=!1;if(64&r)if(a){if(128&r)throw new ge.zc(20)}else a=ge.Qc(e,n,0),u=!0;if(!a)throw new ge.zc(44);if(ge.nd(a.mode)&&(r&=-513),65536&r&&!ge.Hc(a.mode))throw new ge.zc(54);if(!u&&(n=ge.Ae(a,r)))throw new ge.zc(n);return 512&r&&!u&&ge.truncate(a,0),r&=-131713,(a=ge.vd({node:a,path:ge.Tc(a),flags:r,seekable:!0,position:0,Cc:a.Cc,Oe:[],error:!1})).Cc.open&&a.Cc.open(a),!t.logReadFiles||1&r||(ge.Kd||(ge.Kd={}),e in ge.Kd||(ge.Kd[e]=1)),a},close:e=>{if(ge.ed(e))throw new ge.zc(8);e.Bd&&(e.Bd=null);try{e.Cc.close&&e.Cc.close(e)}catch(e){throw e}finally{ge.ne(e.fd)}e.fd=null},ed:e=>null===e.fd,Lc:(e,t,r)=>{if(ge.ed(e))throw new ge.zc(8);if(!e.seekable||!e.Cc.Lc)throw new ge.zc(70);if(0!=r&&1!=r&&2!=r)throw new ge.zc(28);return e.position=e.Cc.Lc(e,t,r),e.Oe=[],e.position},read:(e,t,r,n,a)=>{if(0>n||0>a)throw new ge.zc(28);if(ge.ed(e))throw new ge.zc(8);if(1==(2097155&e.flags))throw new ge.zc(8);if(ge.Hc(e.node.mode))throw new ge.zc(31);if(!e.Cc.read)throw new ge.zc(28);var u=void 0!==a;if(u){if(!e.seekable)throw new ge.zc(70)}else a=e.position;return t=e.Cc.read(e,t,r,n,a),u||(e.position+=t),t},write:(e,t,r,n,a,u)=>{if(0>n||0>a)throw new ge.zc(28);if(ge.ed(e))throw new ge.zc(8);if(0==(2097155&e.flags))throw new ge.zc(8);if(ge.Hc(e.node.mode))throw new ge.zc(31);if(!e.Cc.write)throw new ge.zc(28);e.seekable&&1024&e.flags&&ge.Lc(e,0,2);var l=void 0!==a;if(l){if(!e.seekable)throw new ge.zc(70)}else a=e.position;return t=e.Cc.write(e,t,r,n,a,u),l||(e.position+=t),t},dd:(e,t,r)=>{if(ge.ed(e))throw new ge.zc(8);if(0>t||0>=r)throw new ge.zc(28);if(0==(2097155&e.flags))throw new ge.zc(8);if(!ge.isFile(e.node.mode)&&!ge.Hc(e.node.mode))throw new ge.zc(43);if(!e.Cc.dd)throw new ge.zc(138);e.Cc.dd(e,t,r)},ad:(e,t,r,n,a)=>{if(0!=(2&n)&&0==(2&a)&&2!=(2097155&e.flags))throw new ge.zc(2);if(1==(2097155&e.flags))throw new ge.zc(2);if(!e.Cc.ad)throw new ge.zc(43);return e.Cc.ad(e,t,r,n,a)},kd:(e,t,r,n,a)=>e.Cc.kd?e.Cc.kd(e,t,r,n,a):0,$e:()=>0,Ed:(e,t,r)=>{if(!e.Cc.Ed)throw new ge.zc(59);return e.Cc.Ed(e,t,r)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw Error('Invalid encoding type "'+t.encoding+'"');var r,n=ge.open(e,t.flags);e=ge.stat(e).size;var a=new Uint8Array(e);return ge.read(n,a,0,e,0),"utf8"===t.encoding?r=D(a,0):"binary"===t.encoding&&(r=a),ge.close(n),r},writeFile:(e,t,r={})=>{if(r.flags=r.flags||577,e=ge.open(e,r.flags,r.mode),"string"==typeof t){var n=new Uint8Array(P(t)+1);t=U(t,n,0,n.length),ge.write(e,n,0,t,void 0,r.le)}else{if(!ArrayBuffer.isView(t))throw Error("Unsupported data type");ge.write(e,t,0,t.byteLength,void 0,r.le)}ge.close(e)},cwd:()=>ge.Td,chdir:e=>{if(null===(e=ge.Dc(e,{Jc:!0})).node)throw new ge.zc(44);if(!ge.Hc(e.node.mode))throw new ge.zc(54);var t=ge.Xc(e.node,"x");if(t)throw new ge.zc(t);ge.Td=e.path},pe:()=>{ge.mkdir("/tmp"),ge.mkdir("/home"),ge.mkdir("/home/web_user")},oe:()=>{ge.mkdir("/dev"),ge.Md(ge.Vc(1,3),{read:()=>0,write:(e,t,r,n)=>n}),ge.qd("/dev/null",ge.Vc(1,3)),pe(ge.Vc(5,0),me),pe(ge.Vc(6,0),_e),ge.qd("/dev/tty",ge.Vc(5,0)),ge.qd("/dev/tty1",ge.Vc(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(f)try{var t=_("crypto");return()=>t.randomBytes(1)[0]}catch(e){}return()=>Q("randomDevice")}();ge.Sc("/dev","random",e),ge.Sc("/dev","urandom",e),ge.mkdir("/dev/shm"),ge.mkdir("/dev/shm/tmp")},re:()=>{ge.mkdir("/proc");var e=ge.mkdir("/proc/self");ge.mkdir("/proc/self/fd"),ge.Fc({Fc:()=>{var t=ge.createNode(e,"fd",16895,73);return t.Ac={lookup:(e,t)=>{var r=ge.$c(+t);if(!r)throw new ge.zc(8);return(e={parent:null,Fc:{de:"fake"},Ac:{readlink:()=>r.path}}).parent=e}},t}},{},"/proc/self/fd")},se:()=>{t.stdin?ge.Sc("/dev","stdin",t.stdin):ge.symlink("/dev/tty","/dev/stdin"),t.stdout?ge.Sc("/dev","stdout",null,t.stdout):ge.symlink("/dev/tty","/dev/stdout"),t.stderr?ge.Sc("/dev","stderr",null,t.stderr):ge.symlink("/dev/tty1","/dev/stderr"),ge.open("/dev/stdin",0),ge.open("/dev/stdout",1),ge.open("/dev/stderr",1)},Vd:()=>{ge.zc||(ge.zc=function(e,t){this.name="ErrnoError",this.node=t,this.Ie=function(e){this.Gc=e},this.Ie(e),this.message="FS error"},ge.zc.prototype=Error(),ge.zc.prototype.constructor=ge.zc,[44].forEach((e=>{ge.zd[e]=new ge.zc(e),ge.zd[e].stack="<generic error, no stack>"})))},Je:()=>{ge.Vd(),ge.Mc=Array(4096),ge.Fc(be,{},"/"),ge.pe(),ge.oe(),ge.re(),ge.ue={MEMFS:be}},md:(e,r,n)=>{ge.md.Dd=!0,ge.Vd(),t.stdin=e||t.stdin,t.stdout=r||t.stdout,t.stderr=n||t.stderr,ge.se()},cf:()=>{ge.md.Dd=!1;for(var e=0;e<ge.streams.length;e++){var t=ge.streams[e];t&&ge.close(t)}},Ad:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},Te:(e,t)=>(e=ge.ud(e,t)).exists?e.object:null,ud:(e,t)=>{try{var r=ge.Dc(e,{Jc:!t});e=r.path}catch(e){}var n={od:!1,exists:!1,error:0,name:null,path:null,object:null,Ee:!1,Ge:null,Fe:null};try{r=ge.Dc(e,{parent:!0}),n.Ee=!0,n.Ge=r.path,n.Fe=r.node,n.name=ie(e),r=ge.Dc(e,{Jc:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.od="/"===r.path}catch(e){n.error=e.Gc}return n},Re:(e,t)=>{for(e="string"==typeof e?e:ge.Tc(e),t=t.split("/").reverse();t.length;){var r=t.pop();if(r){var n=le(e+"/"+r);try{ge.mkdir(n)}catch(e){}e=n}}return n},qe:(e,t,r,n,a)=>(e="string"==typeof e?e:ge.Tc(e),t=le(e+"/"+t),ge.create(t,ge.Ad(n,a))),Sd:(e,t,r,n,a,u)=>{var l=t;if(e&&(e="string"==typeof e?e:ge.Tc(e),l=t?le(e+"/"+t):e),e=ge.Ad(n,a),l=ge.create(l,e),r){if("string"==typeof r){for(t=Array(r.length),n=0,a=r.length;n<a;++n)t[n]=r.charCodeAt(n);r=t}ge.chmod(l,146|e),t=ge.open(l,577),ge.write(t,r,0,r.length,0,u),ge.close(t),ge.chmod(l,e)}return l},Sc:(e,t,r,n)=>{e=((e,t)=>le(e+"/"+t))("string"==typeof e?e:ge.Tc(e),t),t=ge.Ad(!!r,!!n),ge.Sc.Hd||(ge.Sc.Hd=64);var a=ge.Vc(ge.Sc.Hd++,0);return ge.Md(a,{open:e=>{e.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,t,n,a)=>{for(var u=0,l=0;l<a;l++){try{var s=r()}catch(e){throw new ge.zc(29)}if(void 0===s&&0===u)throw new ge.zc(6);if(null==s)break;u++,t[n+l]=s}return u&&(e.node.timestamp=Date.now()),u},write:(e,t,r,a)=>{for(var u=0;u<a;u++)try{n(t[r+u])}catch(e){throw new ge.zc(29)}return a&&(e.node.timestamp=Date.now()),u}}),ge.qd(e,t,a)},yd:e=>{if(e.Fd||e.ye||e.link||e.Bc)return!0;if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!l)throw Error("Cannot load without read() or XMLHttpRequest.");try{e.Bc=de(l(e.url),!0),e.Ec=e.Bc.length}catch(e){throw new ge.zc(29)}},Qe:(e,t,r,n,a)=>{function u(){this.Gd=!1,this.Rc=[]}if(u.prototype.get=function(e){if(!(e>this.length-1||0>e)){var t=e%this.chunkSize;return this.$d(e/this.chunkSize|0)[t]}},u.prototype.fe=function(e){this.$d=e},u.prototype.Qd=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(200<=e.status&&300>e.status||304===e.status))throw Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t;e=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t;var u=1048576;a||(u=n);var l=this;l.fe((e=>{var t=e*u,a=(e+1)*u-1;if(a=Math.min(a,n-1),void 0===l.Rc[e]){var s=l.Rc;if(t>a)throw Error("invalid range ("+t+", "+a+") or no bytes requested!");if(a>n-1)throw Error("only "+n+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",r,!1),n!==u&&i.setRequestHeader("Range","bytes="+t+"-"+a),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(200<=i.status&&300>i.status||304===i.status))throw Error("Couldn't load "+r+". Status: "+i.status);t=void 0!==i.response?new Uint8Array(i.response||[]):de(i.responseText||"",!0),s[e]=t}if(void 0===l.Rc[e])throw Error("doXHR failed!");return l.Rc[e]})),!e&&n||(u=n=1,u=n=this.$d(0).length,y("LazyFiles on gzip forces download of the whole file when length is accessed")),this.je=n,this.ie=u,this.Gd=!0},"undefined"!=typeof XMLHttpRequest){if(!p)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var l=new u;Object.defineProperties(l,{length:{get:function(){return this.Gd||this.Qd(),this.je}},chunkSize:{get:function(){return this.Gd||this.Qd(),this.ie}}}),l={Fd:!1,Bc:l}}else l={Fd:!1,url:r};var s=ge.qe(e,t,l,n,a);l.Bc?s.Bc=l.Bc:l.url&&(s.Bc=null,s.url=l.url),Object.defineProperties(s,{Ec:{get:function(){return this.Bc.length}}});var i={};return Object.keys(s.Cc).forEach((e=>{var t=s.Cc[e];i[e]=function(){return ge.yd(s),t.apply(null,arguments)}})),i.read=(e,t,r,n,a)=>{if(ge.yd(s),a>=(e=e.node.Bc).length)t=0;else{if(n=Math.min(e.length-a,n),e.slice)for(var u=0;u<n;u++)t[r+u]=e[a+u];else for(u=0;u<n;u++)t[r+u]=e.get(a+u);t=n}return t},i.ad=()=>{throw ge.yd(s),Q(),new ge.zc(48)},s.Cc=i,s},Se:(e,t,r,n,a,u,l,i,o,c)=>{function d(r){function s(r){c&&c(),i||ge.Sd(e,t,r,n,a,o),u&&u(),K()}Pe.We(r,h,s,(()=>{l&&l(),K()}))||s(r)}var h=t?oe(le(e+"/"+t)):e;J(),"string"==typeof r?function(e,t,r){var n="al "+e;s(e,(r=>{r||Q('Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(r)),n&&K()}),(()=>{if(!r)throw'Loading data file "'+e+'" failed.';r()})),n&&J()}(r,(e=>d(e)),l):d(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,Od:()=>"EM_FS_"+window.location.pathname,Pd:20,cd:"FILE_DATA",df:(e,t=(()=>{}),r=(()=>{}))=>{var n=ge.indexedDB();try{var a=n.open(ge.Od(),ge.Pd)}catch(e){return r(e)}a.onupgradeneeded=()=>{y("creating db"),a.result.createObjectStore(ge.cd)},a.onsuccess=()=>{var n=a.result.transaction([ge.cd],"readwrite"),u=n.objectStore(ge.cd),l=0,s=0,i=e.length;e.forEach((e=>{(e=u.put(ge.ud(e).object.Bc,e)).onsuccess=()=>{++l+s==i&&(0==s?t():r())},e.onerror=()=>{s++,l+s==i&&(0==s?t():r())}})),n.onerror=r},a.onerror=r},Xe:(e,t=(()=>{}),r=(()=>{}))=>{var n=ge.indexedDB();try{var a=n.open(ge.Od(),ge.Pd)}catch(e){return r(e)}a.onupgradeneeded=r,a.onsuccess=()=>{var n=a.result;try{var u=n.transaction([ge.cd],"readonly")}catch(e){return void r(e)}var l=u.objectStore(ge.cd),s=0,i=0,o=e.length;e.forEach((e=>{var n=l.get(e);n.onsuccess=()=>{ge.ud(e).exists&&ge.unlink(e),ge.Sd(se(e),ie(e),n.result,!0,!0,!0),++s+i==o&&(0==i?t():r())},n.onerror=()=>{i++,s+i==o&&(0==i?t():r())}})),u.onerror=r},a.onerror=r}};function we(e,t){if("/"===t.charAt(0))return t;if(e=-100===e?ge.cwd():Le(e).path,0==t.length)throw new ge.zc(44);return le(e+"/"+t)}var ye=void 0;function ve(){return M[(ye+=4)-4>>2]}function Le(e){if(!(e=ge.$c(e)))throw new ge.zc(8);return e}function ke(e){return 0==e%4&&(0!=e%100||0==e%400)}var Te=[0,31,60,91,121,152,182,213,244,274,305,335],Ee=[0,31,59,90,120,151,181,212,243,273,304,334];function xe(e){return(ke(e.getFullYear())?Te:Ee)[e.getMonth()]+e.getDate()-1}function ze(e){var t=P(e)+1,r=He(t);return r&&U(e,T,r,t),r}var Me={};function Fe(){if(!Ae){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in Me)void 0===Me[e]?delete t[e]:t[e]=Me[e];var r=[];for(e in t)r.push(e+"="+t[e]);Ae=r}return Ae}var Ae,Se=[31,29,31,30,31,30,31,31,30,31,30,31],Re=[31,28,31,30,31,30,31,31,30,31,30,31],Ce=[];function De(e){var t=Ce[e];return t||(e>=Ce.length&&(Ce.length=e+1),Ce[e]=t=j.get(e)),t}var Ve=void 0,Ue=[];function Oe(e,t,r,n){e||(e=this),this.parent=e,this.Fc=e.Fc,this.hd=null,this.id=ge.Ce++,this.name=t,this.mode=r,this.Ac={},this.Cc={},this.rdev=n}Object.defineProperties(Oe.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},ye:{get:function(){return ge.Hc(this.mode)}},Fd:{get:function(){return ge.nd(this.mode)}}}),ge.ge=Oe,ge.Je();var Pe,Be={w:function(e,t){try{var r=Le(e);if(r.fd===t)return-28;var n=ge.$c(t);return n&&ge.close(n),ge.vd(r,t,t+1).fd}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},c:function(e,t,r){ye=r;try{var n=Le(e);switch(t){case 0:var a=ve();return 0>a?-28:ge.vd(n,a).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:return a=ve(),n.flags|=a,0;case 5:return a=ve(),x[a+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return M[je()>>2]=28,-1}}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},y:function(e,t,r){ye=r;try{var n=Le(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var a=ve();return M[a>>2]=0;case 21520:return n.tty?-28:-59;case 21531:return a=ve(),ge.Ed(n,t,a);default:return-28}}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},q:function(e,t){try{e=V(e);e:{var r=ge.lstat;try{var n=r(e)}catch(t){if(t&&t.node&&le(e)!==le(ge.Tc(t.node))){var a=-54;break e}throw t}M[t>>2]=n.dev,M[t+8>>2]=n.ino,M[t+12>>2]=n.mode,F[t+16>>2]=n.nlink,M[t+20>>2]=n.uid,M[t+24>>2]=n.gid,M[t+28>>2]=n.rdev,$=[n.size>>>0,(G=n.size,1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[t+40>>2]=$[0],M[t+44>>2]=$[1],M[t+48>>2]=4096,M[t+52>>2]=n.blocks;var u=n.atime.getTime(),l=n.mtime.getTime(),s=n.ctime.getTime();$=[Math.floor(u/1e3)>>>0,(G=Math.floor(u/1e3),1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[t+56>>2]=$[0],M[t+60>>2]=$[1],F[t+64>>2]=u%1e3*1e3,$=[Math.floor(l/1e3)>>>0,(G=Math.floor(l/1e3),1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[t+72>>2]=$[0],M[t+76>>2]=$[1],F[t+80>>2]=l%1e3*1e3,$=[Math.floor(s/1e3)>>>0,(G=Math.floor(s/1e3),1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[t+88>>2]=$[0],M[t+92>>2]=$[1],F[t+96>>2]=s%1e3*1e3,$=[n.ino>>>0,(G=n.ino,1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[t+104>>2]=$[0],M[t+108>>2]=$[1],a=0}return a}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},f:function(e,t,r,n){ye=n;try{t=we(e,t=V(t));var a=n?ve():0;return ge.open(t,r,a).fd}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},r:function(e,t,r,n){try{return t=V(t),n=V(n),t=we(e,t),n=we(r,n),ge.rename(t,n),0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},s:function(e){try{return e=V(e),ge.rmdir(e),0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},d:function(e,t,r){try{return t=we(e,t=V(t)),0===r?ge.unlink(t):512===r?ge.rmdir(t):Q("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return-e.Gc}},z:function(){return!0},o:function(){throw 1/0},g:function(e,t){e=new Date(1e3*(F[e>>2]+4294967296*M[e+4>>2])),M[t>>2]=e.getUTCSeconds(),M[t+4>>2]=e.getUTCMinutes(),M[t+8>>2]=e.getUTCHours(),M[t+12>>2]=e.getUTCDate(),M[t+16>>2]=e.getUTCMonth(),M[t+20>>2]=e.getUTCFullYear()-1900,M[t+24>>2]=e.getUTCDay(),M[t+28>>2]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},h:function(e,t){e=new Date(1e3*(F[e>>2]+4294967296*M[e+4>>2])),M[t>>2]=e.getSeconds(),M[t+4>>2]=e.getMinutes(),M[t+8>>2]=e.getHours(),M[t+12>>2]=e.getDate(),M[t+16>>2]=e.getMonth(),M[t+20>>2]=e.getFullYear()-1900,M[t+24>>2]=e.getDay(),M[t+28>>2]=0|xe(e),M[t+36>>2]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset(),n=new Date(e.getFullYear(),0,1).getTimezoneOffset();M[t+32>>2]=0|(r!=n&&e.getTimezoneOffset()==Math.min(n,r))},i:function(e){var t=new Date(M[e+20>>2]+1900,M[e+16>>2],M[e+12>>2],M[e+8>>2],M[e+4>>2],M[e>>2],0),r=M[e+32>>2],n=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),u=new Date(t.getFullYear(),0,1).getTimezoneOffset(),l=Math.min(u,a);return 0>r?M[e+32>>2]=Number(a!=u&&l==n):0<r!=(l==n)&&(a=Math.max(u,a),t.setTime(t.getTime()+6e4*((0<r?l:a)-n))),M[e+24>>2]=t.getDay(),M[e+28>>2]=0|xe(t),M[e>>2]=t.getSeconds(),M[e+4>>2]=t.getMinutes(),M[e+8>>2]=t.getHours(),M[e+12>>2]=t.getDate(),M[e+16>>2]=t.getMonth(),M[e+20>>2]=t.getYear(),t.getTime()/1e3|0},j:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),u=new Date(a,0,1),l=new Date(a,6,1);a=u.getTimezoneOffset();var s=l.getTimezoneOffset();F[e>>2]=60*Math.max(a,s),M[t>>2]=Number(a!=s),e=n(u),t=n(l),e=ze(e),t=ze(t),s<a?(F[r>>2]=e,F[r+4>>2]=t):(F[r>>2]=t,F[r+4>>2]=e)},B:function(){Q("")},a:function(){return Date.now()},k:function(e,t,r){E.copyWithin(e,t,t+r)},p:function(e){var t=E.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var a=Math,u=a.min;n=Math.max(e,n),n+=(65536-n%65536)%65536;e:{var l=k.buffer;try{k.grow(u.call(a,2147483648,n)-l.byteLength+65535>>>16),B();var s=1;break e}catch(e){}s=void 0}if(s)return!0}return!1},t:function(e,t){var r=0;return Fe().forEach((function(n,a){var u=t+r;for(a=F[e+4*a>>2]=u,u=0;u<n.length;++u)T[a++>>0]=n.charCodeAt(u);T[a>>0]=0,r+=n.length+1})),0},v:function(e,t){var r=Fe();F[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),F[t>>2]=n,0},l:function(e){L||(t.onExit&&t.onExit(e),R=!0),d(e,new ne(e))},b:function(e){try{var t=Le(e);return ge.close(t),0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return e.Gc}},x:function(e,t,r,n){try{e:{var a=Le(e);e=t;for(var u,l=t=0;l<r;l++){var s=F[e>>2],i=F[e+4>>2];e+=8;var o=ge.read(a,T,s,i,u);if(0>o){var c=-1;break e}if(t+=o,o<i)break;void 0!==u&&(u+=o)}c=t}return F[n>>2]=c,0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return e.Gc}},n:function(e,t,r,n,a){try{if(t=r+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*r:NaN,isNaN(t))return 61;var u=Le(e);return ge.Lc(u,t,n),$=[u.position>>>0,(G=u.position,1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[a>>2]=$[0],M[a+4>>2]=$[1],u.Bd&&0===t&&0===n&&(u.Bd=null),0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return e.Gc}},e:function(e,t,r,n){try{e:{var a=Le(e);e=t;for(var u,l=t=0;l<r;l++){var s=F[e>>2],i=F[e+4>>2];e+=8;var o=ge.write(a,T,s,i,u);if(0>o){var c=-1;break e}t+=o,void 0!==u&&(u+=o)}c=t}return F[n>>2]=c,0}catch(e){if(void 0===ge||"ErrnoError"!==e.name)throw e;return e.Gc}},A:function(e,t,r){var n=We();try{De(e)(t,r)}catch(e){if(Ye(n),e!==e+0)throw e;Ne(1,0)}},u:function(e,t,r,n){function a(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function u(e,t){return a(e,t,"0")}function l(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function i(e){var t=e.Yc;for(e=new Date(new Date(e.Zc+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(ke(e.getFullYear())?Se:Re)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=l(t,e)?0>=l(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var o=M[n+40>>2];for(var c in n={Me:M[n>>2],Le:M[n+4>>2],sd:M[n+8>>2],Nd:M[n+12>>2],td:M[n+16>>2],Zc:M[n+20>>2],Oc:M[n+24>>2],Yc:M[n+28>>2],gf:M[n+32>>2],Ke:M[n+36>>2],Ne:o?V(o):""},r=V(r),o={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(c,"g"),o[c]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(c in o={"%a":function(e){return d[e.Oc].substring(0,3)},"%A":function(e){return d[e.Oc]},"%b":function(e){return h[e.td].substring(0,3)},"%B":function(e){return h[e.td]},"%C":function(e){return u((e.Zc+1900)/100|0,2)},"%d":function(e){return u(e.Nd,2)},"%e":function(e){return a(e.Nd,2," ")},"%g":function(e){return i(e).toString().substring(2)},"%G":function(e){return i(e)},"%H":function(e){return u(e.sd,2)},"%I":function(e){return 0==(e=e.sd)?e=12:12<e&&(e-=12),u(e,2)},"%j":function(e){for(var t=0,r=0;r<=e.td-1;t+=(ke(e.Zc+1900)?Se:Re)[r++]);return u(e.Nd+t,3)},"%m":function(e){return u(e.td+1,2)},"%M":function(e){return u(e.Le,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.sd&&12>e.sd?"AM":"PM"},"%S":function(e){return u(e.Me,2)},"%t":function(){return"\t"},"%u":function(e){return e.Oc||7},"%U":function(e){return u(Math.floor((e.Yc+7-e.Oc)/7),2)},"%V":function(e){var t=Math.floor((e.Yc+7-(e.Oc+6)%7)/7);if(2>=(e.Oc+371-e.Yc-2)%7&&t++,t)53==t&&(4==(r=(e.Oc+371-e.Yc)%7)||3==r&&ke(e.Zc)||(t=1));else{t=52;var r=(e.Oc+7-e.Yc-1)%7;(4==r||5==r&&ke(e.Zc%400-1))&&t++}return u(t,2)},"%w":function(e){return e.Oc},"%W":function(e){return u(Math.floor((e.Yc+7-(e.Oc+6)%7)/7),2)},"%y":function(e){return(e.Zc+1900).toString().substring(2)},"%Y":function(e){return e.Zc+1900},"%z":function(e){var t=0<=(e=e.Ke);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Ne},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),o)r.includes(c)&&(r=r.replace(new RegExp(c,"g"),o[c](n)));return(c=de(r=r.replace(/\0\0/g,"%"),!1)).length>t?0:(T.set(c,e),c.length-1)},m:function(e){if(f){if(!e)return 1;if(!(e=V(e)).length)return 0;return null===(e=_("child_process").ff(e,[],{ef:!0,stdio:"inherit"})).status?(t=0,r=(e=>{switch(e){case"SIGHUP":return 1;case"SIGQUIT":return 3;case"SIGFPE":return 8;case"SIGKILL":return 9;case"SIGALRM":return 14;case"SIGTERM":return 15}return 2})(e.signal),t<<8|r):e.status<<8|0}var t,r;return e?(M[je()>>2]=52,-1):0}};function je(){return(je=t.asm.ob).apply(null,arguments)}!function(){function e(e){return e=e.exports,t.asm=e,k=t.asm.C,B(),j=t.asm.ab,H.unshift(t.asm.D),K(),e}var r={a:Be};if(J(),t.instantiateWasm)try{return t.instantiateWasm(r,e)}catch(e){v("Module.instantiateWasm callback failed with error: "+e),u(e)}(function(e,t){var r=Y;return w||"function"!=typeof WebAssembly.instantiateStreaming||Z(r)||r.startsWith("file://")||f||"function"!=typeof fetch?re(r,e,t):fetch(r,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return v("wasm streaming compile failed: "+n),v("falling back to ArrayBuffer instantiation"),re(r,e,t)}))}))})(r,(function(t){e(t.instance)})).catch(u)}(),t._lua_checkstack=function(){return(t._lua_checkstack=t.asm.E).apply(null,arguments)},t._lua_xmove=function(){return(t._lua_xmove=t.asm.F).apply(null,arguments)},t._lua_atpanic=function(){return(t._lua_atpanic=t.asm.G).apply(null,arguments)},t._lua_version=function(){return(t._lua_version=t.asm.H).apply(null,arguments)},t._lua_absindex=function(){return(t._lua_absindex=t.asm.I).apply(null,arguments)},t._lua_gettop=function(){return(t._lua_gettop=t.asm.J).apply(null,arguments)},t._lua_settop=function(){return(t._lua_settop=t.asm.K).apply(null,arguments)},t._lua_closeslot=function(){return(t._lua_closeslot=t.asm.L).apply(null,arguments)},t._lua_rotate=function(){return(t._lua_rotate=t.asm.M).apply(null,arguments)},t._lua_copy=function(){return(t._lua_copy=t.asm.N).apply(null,arguments)},t._lua_pushvalue=function(){return(t._lua_pushvalue=t.asm.O).apply(null,arguments)},t._lua_type=function(){return(t._lua_type=t.asm.P).apply(null,arguments)},t._lua_typename=function(){return(t._lua_typename=t.asm.Q).apply(null,arguments)},t._lua_iscfunction=function(){return(t._lua_iscfunction=t.asm.R).apply(null,arguments)},t._lua_isinteger=function(){return(t._lua_isinteger=t.asm.S).apply(null,arguments)},t._lua_isnumber=function(){return(t._lua_isnumber=t.asm.T).apply(null,arguments)},t._lua_isstring=function(){return(t._lua_isstring=t.asm.U).apply(null,arguments)},t._lua_isuserdata=function(){return(t._lua_isuserdata=t.asm.V).apply(null,arguments)},t._lua_rawequal=function(){return(t._lua_rawequal=t.asm.W).apply(null,arguments)},t._lua_arith=function(){return(t._lua_arith=t.asm.X).apply(null,arguments)},t._lua_compare=function(){return(t._lua_compare=t.asm.Y).apply(null,arguments)},t._lua_stringtonumber=function(){return(t._lua_stringtonumber=t.asm.Z).apply(null,arguments)},t._lua_tonumberx=function(){return(t._lua_tonumberx=t.asm._).apply(null,arguments)},t._lua_tointegerx=function(){return(t._lua_tointegerx=t.asm.$).apply(null,arguments)},t._lua_toboolean=function(){return(t._lua_toboolean=t.asm.aa).apply(null,arguments)},t._lua_tolstring=function(){return(t._lua_tolstring=t.asm.ba).apply(null,arguments)},t._lua_rawlen=function(){return(t._lua_rawlen=t.asm.ca).apply(null,arguments)},t._lua_tocfunction=function(){return(t._lua_tocfunction=t.asm.da).apply(null,arguments)},t._lua_touserdata=function(){return(t._lua_touserdata=t.asm.ea).apply(null,arguments)},t._lua_tothread=function(){return(t._lua_tothread=t.asm.fa).apply(null,arguments)},t._lua_topointer=function(){return(t._lua_topointer=t.asm.ga).apply(null,arguments)},t._lua_pushnil=function(){return(t._lua_pushnil=t.asm.ha).apply(null,arguments)},t._lua_pushnumber=function(){return(t._lua_pushnumber=t.asm.ia).apply(null,arguments)},t._lua_pushinteger=function(){return(t._lua_pushinteger=t.asm.ja).apply(null,arguments)},t._lua_pushlstring=function(){return(t._lua_pushlstring=t.asm.ka).apply(null,arguments)},t._lua_pushstring=function(){return(t._lua_pushstring=t.asm.la).apply(null,arguments)},t._lua_pushcclosure=function(){return(t._lua_pushcclosure=t.asm.ma).apply(null,arguments)},t._lua_pushboolean=function(){return(t._lua_pushboolean=t.asm.na).apply(null,arguments)},t._lua_pushlightuserdata=function(){return(t._lua_pushlightuserdata=t.asm.oa).apply(null,arguments)},t._lua_pushthread=function(){return(t._lua_pushthread=t.asm.pa).apply(null,arguments)},t._lua_getglobal=function(){return(t._lua_getglobal=t.asm.qa).apply(null,arguments)},t._lua_gettable=function(){return(t._lua_gettable=t.asm.ra).apply(null,arguments)},t._lua_getfield=function(){return(t._lua_getfield=t.asm.sa).apply(null,arguments)},t._lua_geti=function(){return(t._lua_geti=t.asm.ta).apply(null,arguments)},t._lua_rawget=function(){return(t._lua_rawget=t.asm.ua).apply(null,arguments)},t._lua_rawgeti=function(){return(t._lua_rawgeti=t.asm.va).apply(null,arguments)},t._lua_rawgetp=function(){return(t._lua_rawgetp=t.asm.wa).apply(null,arguments)},t._lua_createtable=function(){return(t._lua_createtable=t.asm.xa).apply(null,arguments)},t._lua_getmetatable=function(){return(t._lua_getmetatable=t.asm.ya).apply(null,arguments)},t._lua_getiuservalue=function(){return(t._lua_getiuservalue=t.asm.za).apply(null,arguments)},t._lua_setglobal=function(){return(t._lua_setglobal=t.asm.Aa).apply(null,arguments)},t._lua_settable=function(){return(t._lua_settable=t.asm.Ba).apply(null,arguments)},t._lua_setfield=function(){return(t._lua_setfield=t.asm.Ca).apply(null,arguments)},t._lua_seti=function(){return(t._lua_seti=t.asm.Da).apply(null,arguments)},t._lua_rawset=function(){return(t._lua_rawset=t.asm.Ea).apply(null,arguments)},t._lua_rawsetp=function(){return(t._lua_rawsetp=t.asm.Fa).apply(null,arguments)},t._lua_rawseti=function(){return(t._lua_rawseti=t.asm.Ga).apply(null,arguments)},t._lua_setmetatable=function(){return(t._lua_setmetatable=t.asm.Ha).apply(null,arguments)},t._lua_setiuservalue=function(){return(t._lua_setiuservalue=t.asm.Ia).apply(null,arguments)},t._lua_callk=function(){return(t._lua_callk=t.asm.Ja).apply(null,arguments)},t._lua_pcallk=function(){return(t._lua_pcallk=t.asm.Ka).apply(null,arguments)},t._lua_load=function(){return(t._lua_load=t.asm.La).apply(null,arguments)},t._lua_dump=function(){return(t._lua_dump=t.asm.Ma).apply(null,arguments)},t._lua_status=function(){return(t._lua_status=t.asm.Na).apply(null,arguments)},t._lua_error=function(){return(t._lua_error=t.asm.Oa).apply(null,arguments)},t._lua_next=function(){return(t._lua_next=t.asm.Pa).apply(null,arguments)},t._lua_toclose=function(){return(t._lua_toclose=t.asm.Qa).apply(null,arguments)},t._lua_concat=function(){return(t._lua_concat=t.asm.Ra).apply(null,arguments)},t._lua_len=function(){return(t._lua_len=t.asm.Sa).apply(null,arguments)},t._lua_getallocf=function(){return(t._lua_getallocf=t.asm.Ta).apply(null,arguments)},t._lua_setallocf=function(){return(t._lua_setallocf=t.asm.Ua).apply(null,arguments)},t._lua_setwarnf=function(){return(t._lua_setwarnf=t.asm.Va).apply(null,arguments)},t._lua_warning=function(){return(t._lua_warning=t.asm.Wa).apply(null,arguments)},t._lua_newuserdatauv=function(){return(t._lua_newuserdatauv=t.asm.Xa).apply(null,arguments)},t._lua_getupvalue=function(){return(t._lua_getupvalue=t.asm.Ya).apply(null,arguments)},t._lua_setupvalue=function(){return(t._lua_setupvalue=t.asm.Za).apply(null,arguments)},t._lua_upvalueid=function(){return(t._lua_upvalueid=t.asm._a).apply(null,arguments)},t._lua_upvaluejoin=function(){return(t._lua_upvaluejoin=t.asm.$a).apply(null,arguments)},t._luaL_traceback=function(){return(t._luaL_traceback=t.asm.bb).apply(null,arguments)},t._lua_getstack=function(){return(t._lua_getstack=t.asm.cb).apply(null,arguments)},t._lua_getinfo=function(){return(t._lua_getinfo=t.asm.db).apply(null,arguments)},t._luaL_buffinit=function(){return(t._luaL_buffinit=t.asm.eb).apply(null,arguments)},t._luaL_addstring=function(){return(t._luaL_addstring=t.asm.fb).apply(null,arguments)},t._luaL_prepbuffsize=function(){return(t._luaL_prepbuffsize=t.asm.gb).apply(null,arguments)},t._luaL_addvalue=function(){return(t._luaL_addvalue=t.asm.hb).apply(null,arguments)},t._luaL_pushresult=function(){return(t._luaL_pushresult=t.asm.ib).apply(null,arguments)},t._luaL_argerror=function(){return(t._luaL_argerror=t.asm.jb).apply(null,arguments)},t._luaL_typeerror=function(){return(t._luaL_typeerror=t.asm.kb).apply(null,arguments)},t._luaL_getmetafield=function(){return(t._luaL_getmetafield=t.asm.lb).apply(null,arguments)},t._luaL_where=function(){return(t._luaL_where=t.asm.mb).apply(null,arguments)},t._luaL_fileresult=function(){return(t._luaL_fileresult=t.asm.nb).apply(null,arguments)},t._luaL_execresult=function(){return(t._luaL_execresult=t.asm.pb).apply(null,arguments)},t._luaL_newmetatable=function(){return(t._luaL_newmetatable=t.asm.qb).apply(null,arguments)},t._luaL_setmetatable=function(){return(t._luaL_setmetatable=t.asm.rb).apply(null,arguments)},t._luaL_testudata=function(){return(t._luaL_testudata=t.asm.sb).apply(null,arguments)},t._luaL_checkudata=function(){return(t._luaL_checkudata=t.asm.tb).apply(null,arguments)},t._luaL_optlstring=function(){return(t._luaL_optlstring=t.asm.ub).apply(null,arguments)},t._luaL_checklstring=function(){return(t._luaL_checklstring=t.asm.vb).apply(null,arguments)},t._luaL_checkstack=function(){return(t._luaL_checkstack=t.asm.wb).apply(null,arguments)},t._luaL_checktype=function(){return(t._luaL_checktype=t.asm.xb).apply(null,arguments)},t._luaL_checkany=function(){return(t._luaL_checkany=t.asm.yb).apply(null,arguments)},t._luaL_checknumber=function(){return(t._luaL_checknumber=t.asm.zb).apply(null,arguments)},t._luaL_optnumber=function(){return(t._luaL_optnumber=t.asm.Ab).apply(null,arguments)},t._luaL_checkinteger=function(){return(t._luaL_checkinteger=t.asm.Bb).apply(null,arguments)},t._luaL_optinteger=function(){return(t._luaL_optinteger=t.asm.Cb).apply(null,arguments)},t._luaL_setfuncs=function(){return(t._luaL_setfuncs=t.asm.Db).apply(null,arguments)},t._luaL_addlstring=function(){return(t._luaL_addlstring=t.asm.Eb).apply(null,arguments)},t._luaL_pushresultsize=function(){return(t._luaL_pushresultsize=t.asm.Fb).apply(null,arguments)},t._luaL_buffinitsize=function(){return(t._luaL_buffinitsize=t.asm.Gb).apply(null,arguments)},t._luaL_ref=function(){return(t._luaL_ref=t.asm.Hb).apply(null,arguments)},t._luaL_unref=function(){return(t._luaL_unref=t.asm.Ib).apply(null,arguments)},t._luaL_loadfilex=function(){return(t._luaL_loadfilex=t.asm.Jb).apply(null,arguments)},t._luaL_loadbufferx=function(){return(t._luaL_loadbufferx=t.asm.Kb).apply(null,arguments)},t._luaL_loadstring=function(){return(t._luaL_loadstring=t.asm.Lb).apply(null,arguments)},t._luaL_callmeta=function(){return(t._luaL_callmeta=t.asm.Mb).apply(null,arguments)},t._luaL_len=function(){return(t._luaL_len=t.asm.Nb).apply(null,arguments)},t._luaL_tolstring=function(){return(t._luaL_tolstring=t.asm.Ob).apply(null,arguments)},t._luaL_getsubtable=function(){return(t._luaL_getsubtable=t.asm.Pb).apply(null,arguments)},t._luaL_requiref=function(){return(t._luaL_requiref=t.asm.Qb).apply(null,arguments)},t._luaL_addgsub=function(){return(t._luaL_addgsub=t.asm.Rb).apply(null,arguments)},t._luaL_gsub=function(){return(t._luaL_gsub=t.asm.Sb).apply(null,arguments)},t._luaL_newstate=function(){return(t._luaL_newstate=t.asm.Tb).apply(null,arguments)},t._lua_newstate=function(){return(t._lua_newstate=t.asm.Ub).apply(null,arguments)},t._free=function(){return(t._free=t.asm.Vb).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.Wb).apply(null,arguments)},t._luaL_checkversion_=function(){return(t._luaL_checkversion_=t.asm.Xb).apply(null,arguments)},t._luaopen_base=function(){return(t._luaopen_base=t.asm.Yb).apply(null,arguments)},t._luaopen_coroutine=function(){return(t._luaopen_coroutine=t.asm.Zb).apply(null,arguments)},t._lua_newthread=function(){return(t._lua_newthread=t.asm._b).apply(null,arguments)},t._lua_yieldk=function(){return(t._lua_yieldk=t.asm.$b).apply(null,arguments)},t._lua_isyieldable=function(){return(t._lua_isyieldable=t.asm.ac).apply(null,arguments)},t._lua_resetthread=function(){return(t._lua_resetthread=t.asm.bc).apply(null,arguments)},t._lua_resume=function(){return(t._lua_resume=t.asm.cc).apply(null,arguments)},t._luaopen_debug=function(){return(t._luaopen_debug=t.asm.dc).apply(null,arguments)},t._lua_gethookmask=function(){return(t._lua_gethookmask=t.asm.ec).apply(null,arguments)},t._lua_gethook=function(){return(t._lua_gethook=t.asm.fc).apply(null,arguments)},t._lua_gethookcount=function(){return(t._lua_gethookcount=t.asm.gc).apply(null,arguments)},t._lua_getlocal=function(){return(t._lua_getlocal=t.asm.hc).apply(null,arguments)},t._lua_sethook=function(){return(t._lua_sethook=t.asm.ic).apply(null,arguments)},t._lua_setlocal=function(){return(t._lua_setlocal=t.asm.jc).apply(null,arguments)},t._lua_setcstacklimit=function(){return(t._lua_setcstacklimit=t.asm.kc).apply(null,arguments)};var Ie,He=t._malloc=function(){return(He=t._malloc=t.asm.lc).apply(null,arguments)};function Ne(){return(Ne=t.asm.vc).apply(null,arguments)}function We(){return(We=t.asm.wc).apply(null,arguments)}function Ye(){return(Ye=t.asm.xc).apply(null,arguments)}function Ge(){return(Ge=t.asm.yc).apply(null,arguments)}function $e(){function e(){if(!Ie&&(Ie=!0,t.calledRun=!0,!R)){if(t.noFSInit||ge.md.Dd||ge.md(),ge.ce=!1,ae(H),a(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();N.unshift(e)}ae(N)}}if(!(0<q)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)W();ae(I),0<q||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._luaL_openlibs=function(){return(t._luaL_openlibs=t.asm.mc).apply(null,arguments)},t._luaopen_package=function(){return(t._luaopen_package=t.asm.nc).apply(null,arguments)},t._luaopen_table=function(){return(t._luaopen_table=t.asm.oc).apply(null,arguments)},t._luaopen_io=function(){return(t._luaopen_io=t.asm.pc).apply(null,arguments)},t._luaopen_os=function(){return(t._luaopen_os=t.asm.qc).apply(null,arguments)},t._luaopen_string=function(){return(t._luaopen_string=t.asm.rc).apply(null,arguments)},t._luaopen_math=function(){return(t._luaopen_math=t.asm.sc).apply(null,arguments)},t._luaopen_utf8=function(){return(t._luaopen_utf8=t.asm.tc).apply(null,arguments)},t._lua_close=function(){return(t._lua_close=t.asm.uc).apply(null,arguments)},t.stringToUTF8=O,t.lengthBytesUTF8=P,t.ENV=Me,t.ccall=function(e,r,n,a){var u={string:e=>{var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);O(e,t=Ge(r),r)}return t},array:e=>{var t=Ge(e.length);return T.set(e,t),t}};e=t["_"+e];var l,s=[],i=0;if(a)for(var o=0;o<a.length;o++){var c=u[n[o]];c?(0===i&&(i=We()),s[o]=c(a[o])):s[o]=a[o]}return l=n=e.apply(null,s),0!==i&&Ye(i),"string"===r?V(l):"boolean"===r?!!l:l},t.addFunction=function(e,t){if(!Ve){Ve=new WeakMap;var r=j.length;if(Ve)for(var n=0;n<0+r;n++){var a=De(n);a&&Ve.set(a,n)}}if(r=Ve.get(e)||0)return r;if(Ue.length)r=Ue.pop();else{try{j.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}r=j.length-1}try{n=r,j.set(n,e),Ce[n]=j.get(n)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,a={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"};for(var u={parameters:[],results:"v"==t[0]?[]:[a[t[0]]]},l=1;l<t.length;++l)u.parameters.push(a[t[l]]),"j"===t[l]&&u.parameters.push("i32");t=new n(u,e)}else{for(n=[1],a=t.slice(0,1),t=t.slice(1),u={i:127,p:127,j:126,f:125,d:124},n.push(96),128>(l=t.length)?n.push(l):n.push(l%128|128,l>>7),l=0;l<t.length;++l)n.push(u[t[l]]);"v"==a?n.push(0):n.push(1,u[a]),t=[0,97,115,109,1,0,0,0,1],128>(a=n.length)?t.push(a):t.push(a%128|128,a>>7),t.push.apply(t,n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}n=r,j.set(n,t),Ce[n]=j.get(n)}return Ve.set(e,r),r},t.removeFunction=function(e){Ve.delete(De(e)),Ue.push(e)},t.setValue=function(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":T[e>>0]=t;break;case"i16":x[e>>1]=t;break;case"i32":M[e>>2]=t;break;case"i64":$=[t>>>0,(G=t,1<=+Math.abs(G)?0<G?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],M[e>>2]=$[0],M[e+4>>2]=$[1];break;case"float":A[e>>2]=t;break;case"double":S[e>>3]=t;break;case"*":F[e>>2]=t;break;default:Q("invalid type for setValue: "+r)}},t.getValue=function(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return T[e>>0];case"i16":return x[e>>1];case"i32":case"i64":return M[e>>2];case"float":return A[e>>2];case"double":return S[e>>3];case"*":return F[e>>2];default:Q("invalid type for getValue: "+t)}},t.allocateUTF8=ze,t.FS=ge,X=function e(){Ie||$e(),Ie||(X=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return $e(),e.ready});class F{static async initialize(e,t){const r=await M({print:console.log,printErr:console.error,locateFile:(t,r)=>e||r+t,preRun:e=>{"object"==typeof t&&Object.entries(t).forEach((([t,r])=>e.ENV[t]=r))}});return new F(r)}constructor(e){this.referenceTracker=new WeakMap,this.referenceMap=new Map,this.availableReferences=[],this.module=e,this.luaL_checkversion_=this.cwrap("luaL_checkversion_",null,["number","number","number"]),this.luaL_getmetafield=this.cwrap("luaL_getmetafield","number",["number","number","string"]),this.luaL_callmeta=this.cwrap("luaL_callmeta","number",["number","number","string"]),this.luaL_tolstring=this.cwrap("luaL_tolstring","string",["number","number","number"]),this.luaL_argerror=this.cwrap("luaL_argerror","number",["number","number","string"]),this.luaL_typeerror=this.cwrap("luaL_typeerror","number",["number","number","string"]),this.luaL_checklstring=this.cwrap("luaL_checklstring","string",["number","number","number"]),this.luaL_optlstring=this.cwrap("luaL_optlstring","string",["number","number","string","number"]),this.luaL_checknumber=this.cwrap("luaL_checknumber","number",["number","number"]),this.luaL_optnumber=this.cwrap("luaL_optnumber","number",["number","number","number"]),this.luaL_checkinteger=this.cwrap("luaL_checkinteger","number",["number","number"]),this.luaL_optinteger=this.cwrap("luaL_optinteger","number",["number","number","number"]),this.luaL_checkstack=this.cwrap("luaL_checkstack",null,["number","number","string"]),this.luaL_checktype=this.cwrap("luaL_checktype",null,["number","number","number"]),this.luaL_checkany=this.cwrap("luaL_checkany",null,["number","number"]),this.luaL_newmetatable=this.cwrap("luaL_newmetatable","number",["number","string"]),this.luaL_setmetatable=this.cwrap("luaL_setmetatable",null,["number","string"]),this.luaL_testudata=this.cwrap("luaL_testudata","number",["number","number","string"]),this.luaL_checkudata=this.cwrap("luaL_checkudata","number",["number","number","string"]),this.luaL_where=this.cwrap("luaL_where",null,["number","number"]),this.luaL_fileresult=this.cwrap("luaL_fileresult","number",["number","number","string"]),this.luaL_execresult=this.cwrap("luaL_execresult","number",["number","number"]),this.luaL_ref=this.cwrap("luaL_ref","number",["number","number"]),this.luaL_unref=this.cwrap("luaL_unref",null,["number","number","number"]),this.luaL_loadfilex=this.cwrap("luaL_loadfilex","number",["number","string","string"]),this.luaL_loadbufferx=this.cwrap("luaL_loadbufferx","number",["number","string|number","number","string|number","string"]),this.luaL_loadstring=this.cwrap("luaL_loadstring","number",["number","string"]),this.luaL_newstate=this.cwrap("luaL_newstate","number",[]),this.luaL_len=this.cwrap("luaL_len","number",["number","number"]),this.luaL_addgsub=this.cwrap("luaL_addgsub",null,["number","string","string","string"]),this.luaL_gsub=this.cwrap("luaL_gsub","string",["number","string","string","string"]),this.luaL_setfuncs=this.cwrap("luaL_setfuncs",null,["number","number","number"]),this.luaL_getsubtable=this.cwrap("luaL_getsubtable","number",["number","number","string"]),this.luaL_traceback=this.cwrap("luaL_traceback",null,["number","number","string","number"]),this.luaL_requiref=this.cwrap("luaL_requiref",null,["number","string","number","number"]),this.luaL_buffinit=this.cwrap("luaL_buffinit",null,["number","number"]),this.luaL_prepbuffsize=this.cwrap("luaL_prepbuffsize","string",["number","number"]),this.luaL_addlstring=this.cwrap("luaL_addlstring",null,["number","string","number"]),this.luaL_addstring=this.cwrap("luaL_addstring",null,["number","string"]),this.luaL_addvalue=this.cwrap("luaL_addvalue",null,["number"]),this.luaL_pushresult=this.cwrap("luaL_pushresult",null,["number"]),this.luaL_pushresultsize=this.cwrap("luaL_pushresultsize",null,["number","number"]),this.luaL_buffinitsize=this.cwrap("luaL_buffinitsize","string",["number","number","number"]),this.lua_newstate=this.cwrap("lua_newstate","number",["number","number"]),this.lua_close=this.cwrap("lua_close",null,["number"]),this.lua_newthread=this.cwrap("lua_newthread","number",["number"]),this.lua_resetthread=this.cwrap("lua_resetthread","number",["number"]),this.lua_atpanic=this.cwrap("lua_atpanic","number",["number","number"]),this.lua_version=this.cwrap("lua_version","number",["number"]),this.lua_absindex=this.cwrap("lua_absindex","number",["number","number"]),this.lua_gettop=this.cwrap("lua_gettop","number",["number"]),this.lua_settop=this.cwrap("lua_settop",null,["number","number"]),this.lua_pushvalue=this.cwrap("lua_pushvalue",null,["number","number"]),this.lua_rotate=this.cwrap("lua_rotate",null,["number","number","number"]),this.lua_copy=this.cwrap("lua_copy",null,["number","number","number"]),this.lua_checkstack=this.cwrap("lua_checkstack","number",["number","number"]),this.lua_xmove=this.cwrap("lua_xmove",null,["number","number","number"]),this.lua_isnumber=this.cwrap("lua_isnumber","number",["number","number"]),this.lua_isstring=this.cwrap("lua_isstring","number",["number","number"]),this.lua_iscfunction=this.cwrap("lua_iscfunction","number",["number","number"]),this.lua_isinteger=this.cwrap("lua_isinteger","number",["number","number"]),this.lua_isuserdata=this.cwrap("lua_isuserdata","number",["number","number"]),this.lua_type=this.cwrap("lua_type","number",["number","number"]),this.lua_typename=this.cwrap("lua_typename","string",["number","number"]),this.lua_tonumberx=this.cwrap("lua_tonumberx","number",["number","number","number"]),this.lua_tointegerx=this.cwrap("lua_tointegerx","number",["number","number","number"]),this.lua_toboolean=this.cwrap("lua_toboolean","number",["number","number"]),this.lua_tolstring=this.cwrap("lua_tolstring","string",["number","number","number"]),this.lua_rawlen=this.cwrap("lua_rawlen","number",["number","number"]),this.lua_tocfunction=this.cwrap("lua_tocfunction","number",["number","number"]),this.lua_touserdata=this.cwrap("lua_touserdata","number",["number","number"]),this.lua_tothread=this.cwrap("lua_tothread","number",["number","number"]),this.lua_topointer=this.cwrap("lua_topointer","number",["number","number"]),this.lua_arith=this.cwrap("lua_arith",null,["number","number"]),this.lua_rawequal=this.cwrap("lua_rawequal","number",["number","number","number"]),this.lua_compare=this.cwrap("lua_compare","number",["number","number","number","number"]),this.lua_pushnil=this.cwrap("lua_pushnil",null,["number"]),this.lua_pushnumber=this.cwrap("lua_pushnumber",null,["number","number"]),this.lua_pushinteger=this.cwrap("lua_pushinteger",null,["number","number"]),this.lua_pushlstring=this.cwrap("lua_pushlstring","string",["number","string|number","number"]),this.lua_pushstring=this.cwrap("lua_pushstring","string",["number","string|number"]),this.lua_pushcclosure=this.cwrap("lua_pushcclosure",null,["number","number","number"]),this.lua_pushboolean=this.cwrap("lua_pushboolean",null,["number","number"]),this.lua_pushlightuserdata=this.cwrap("lua_pushlightuserdata",null,["number","number"]),this.lua_pushthread=this.cwrap("lua_pushthread","number",["number"]),this.lua_getglobal=this.cwrap("lua_getglobal","number",["number","string"]),this.lua_gettable=this.cwrap("lua_gettable","number",["number","number"]),this.lua_getfield=this.cwrap("lua_getfield","number",["number","number","string"]),this.lua_geti=this.cwrap("lua_geti","number",["number","number","number"]),this.lua_rawget=this.cwrap("lua_rawget","number",["number","number"]),this.lua_rawgeti=this.cwrap("lua_rawgeti","number",["number","number","number"]),this.lua_rawgetp=this.cwrap("lua_rawgetp","number",["number","number","number"]),this.lua_createtable=this.cwrap("lua_createtable",null,["number","number","number"]),this.lua_newuserdatauv=this.cwrap("lua_newuserdatauv","number",["number","number","number"]),this.lua_getmetatable=this.cwrap("lua_getmetatable","number",["number","number"]),this.lua_getiuservalue=this.cwrap("lua_getiuservalue","number",["number","number","number"]),this.lua_setglobal=this.cwrap("lua_setglobal",null,["number","string"]),this.lua_settable=this.cwrap("lua_settable",null,["number","number"]),this.lua_setfield=this.cwrap("lua_setfield",null,["number","number","string"]),this.lua_seti=this.cwrap("lua_seti",null,["number","number","number"]),this.lua_rawset=this.cwrap("lua_rawset",null,["number","number"]),this.lua_rawseti=this.cwrap("lua_rawseti",null,["number","number","number"]),this.lua_rawsetp=this.cwrap("lua_rawsetp",null,["number","number","number"]),this.lua_setmetatable=this.cwrap("lua_setmetatable","number",["number","number"]),this.lua_setiuservalue=this.cwrap("lua_setiuservalue","number",["number","number","number"]),this.lua_callk=this.cwrap("lua_callk",null,["number","number","number","number","number"]),this.lua_pcallk=this.cwrap("lua_pcallk","number",["number","number","number","number","number","number"]),this.lua_load=this.cwrap("lua_load","number",["number","number","number","string","string"]),this.lua_dump=this.cwrap("lua_dump","number",["number","number","number","number"]),this.lua_yieldk=this.cwrap("lua_yieldk","number",["number","number","number","number"]),this.lua_resume=this.cwrap("lua_resume","number",["number","number","number","number"]),this.lua_status=this.cwrap("lua_status","number",["number"]),this.lua_isyieldable=this.cwrap("lua_isyieldable","number",["number"]),this.lua_setwarnf=this.cwrap("lua_setwarnf",null,["number","number","number"]),this.lua_warning=this.cwrap("lua_warning",null,["number","string","number"]),this.lua_error=this.cwrap("lua_error","number",["number"]),this.lua_next=this.cwrap("lua_next","number",["number","number"]),this.lua_concat=this.cwrap("lua_concat",null,["number","number"]),this.lua_len=this.cwrap("lua_len",null,["number","number"]),this.lua_stringtonumber=this.cwrap("lua_stringtonumber","number",["number","string"]),this.lua_getallocf=this.cwrap("lua_getallocf","number",["number","number"]),this.lua_setallocf=this.cwrap("lua_setallocf",null,["number","number","number"]),this.lua_toclose=this.cwrap("lua_toclose",null,["number","number"]),this.lua_closeslot=this.cwrap("lua_closeslot",null,["number","number"]),this.lua_getstack=this.cwrap("lua_getstack","number",["number","number","number"]),this.lua_getinfo=this.cwrap("lua_getinfo","number",["number","string","number"]),this.lua_getlocal=this.cwrap("lua_getlocal","string",["number","number","number"]),this.lua_setlocal=this.cwrap("lua_setlocal","string",["number","number","number"]),this.lua_getupvalue=this.cwrap("lua_getupvalue","string",["number","number","number"]),this.lua_setupvalue=this.cwrap("lua_setupvalue","string",["number","number","number"]),this.lua_upvalueid=this.cwrap("lua_upvalueid","number",["number","number","number"]),this.lua_upvaluejoin=this.cwrap("lua_upvaluejoin",null,["number","number","number","number","number"]),this.lua_sethook=this.cwrap("lua_sethook",null,["number","number","number","number"]),this.lua_gethook=this.cwrap("lua_gethook","number",["number"]),this.lua_gethookmask=this.cwrap("lua_gethookmask","number",["number"]),this.lua_gethookcount=this.cwrap("lua_gethookcount","number",["number"]),this.lua_setcstacklimit=this.cwrap("lua_setcstacklimit","number",["number","number"]),this.luaopen_base=this.cwrap("luaopen_base","number",["number"]),this.luaopen_coroutine=this.cwrap("luaopen_coroutine","number",["number"]),this.luaopen_table=this.cwrap("luaopen_table","number",["number"]),this.luaopen_io=this.cwrap("luaopen_io","number",["number"]),this.luaopen_os=this.cwrap("luaopen_os","number",["number"]),this.luaopen_string=this.cwrap("luaopen_string","number",["number"]),this.luaopen_utf8=this.cwrap("luaopen_utf8","number",["number"]),this.luaopen_math=this.cwrap("luaopen_math","number",["number"]),this.luaopen_debug=this.cwrap("luaopen_debug","number",["number"]),this.luaopen_package=this.cwrap("luaopen_package","number",["number"]),this.luaL_openlibs=this.cwrap("luaL_openlibs",null,["number"])}lua_remove(e,t){this.lua_rotate(e,t,-1),this.lua_pop(e,1)}lua_pop(e,t){this.lua_settop(e,-t-1)}luaL_getmetatable(e,t){return this.lua_getfield(e,u,t)}lua_yield(e,t){return this.lua_yieldk(e,t,0,null)}lua_upvalueindex(e){return u-e}ref(e){const t=this.referenceTracker.get(e);if(t)return t.refCount++,t.index;const r=this.availableReferences.pop(),n=void 0===r?this.referenceMap.size+1:r;return this.referenceMap.set(n,e),this.referenceTracker.set(e,{refCount:1,index:n}),this.lastRefIndex=n,n}unref(e){const t=this.referenceMap.get(e);if(void 0===t)return;const r=this.referenceTracker.get(t);if(void 0===r)return this.referenceTracker.delete(t),void this.availableReferences.push(e);r.refCount--,r.refCount<=0&&(this.referenceTracker.delete(t),this.referenceMap.delete(e),this.availableReferences.push(e))}getRef(e){return this.referenceMap.get(e)}getLastRefIndex(){return this.lastRefIndex}printRefs(){for(const[e,t]of this.referenceMap.entries())console.log(e,t)}cwrap(e,t,r){return r.some((e=>"string|number"===e))?(...n)=>{const a=[],u=r.map(((e,t)=>{var r;if("string|number"===e){if("number"==typeof n[t])return"number";if((null===(r=n[t])||void 0===r?void 0:r.length)>1024){const e=this.module.allocateUTF8(n[t]);return n[t]=e,a.push(e),"number"}return"string"}return e}));try{return this.module.ccall(e,t,u,n)}finally{for(const e of a)this.module._free(e)}}:(...n)=>this.module.ccall(e,t,r,n)}}var A="1.15.0";e.Decoration=d,e.LUAI_MAXSTACK=a,e.LUA_MULTRET=-1,e.LUA_REGISTRYINDEX=u,e.LuaEngine=x,e.LuaFactory=class{constructor(e,t){var r;void 0===e&&("object"==typeof window&&void 0!==window.document||"object"==typeof self&&"DedicatedWorkerGlobalScope"===(null===(r=null===self||void 0===self?void 0:self.constructor)||void 0===r?void 0:r.name))&&(e=`https://unpkg.com/wasmoon@${A.slice(0,A.lastIndexOf("."))}/dist/glue.wasm`),this.luaWasmPromise=F.initialize(e,t)}async mountFile(e,t){this.mountFileSync(await this.getLuaModule(),e,t)}mountFileSync(e,t,r){const n=t.lastIndexOf("/"),a=t.substring(n+1),u=t.substring(0,t.length-a.length-1);if(u.length>0){const t=u.split("/").reverse();let r="";for(;t.length;){const n=t.pop();if(!n)continue;const a=`${r}/${n}`;try{e.module.FS.mkdir(a)}catch(e){}r=a}}e.module.FS.writeFile(t,r)}async createEngine(e={}){return new x(await this.getLuaModule(),e)}async getLuaModule(){return this.luaWasmPromise}},e.LuaGlobal=m,e.LuaMultiReturn=p,e.LuaRawResult=g,e.LuaThread=f,e.LuaTimeoutError=c,e.LuaTypeExtension=_,e.LuaWasm=F,e.PointerSize=4,e.decorate=function(e,t){return new d(e,t)},e.decorateFunction=w,e.decorateProxy=L,e.decorateUserdata=function(e){return new d(e,{reference:!0})}}(t)},57057:(e,t,r)=>{"use strict";e.exports=r.p+"526dca73290bcbc1207a.wasm"}}]);